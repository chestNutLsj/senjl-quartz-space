## 数据和信号

### 模拟与数字

数据以及表示数据的信号可以使用模拟analog或者数字digital的形式

- 模拟数据与数字数据
	
	- 模拟数据指连续状态的信息，例如人说话时形成模拟形式的声波，通过麦克风采集并转换成模拟信号，或者采样转换成数字信号
		
	- 数字数据指离散状态的信息，例如0/1形式的数据可以转换成数字信号，或调制成模拟信号通过介质进行传输

- 模拟信号与数字信号
	
	信号signal可以是数字信号或模拟信号
	
	- 模拟信号在一段时间内有无穷多个强度等级。当波形振幅由A变为B时，沿着它变化的过程有无穷多个值
		
	- 数字信号只能有有限个已定义的数值，通常是0或1
		
	- 以信号的值或强度为纵轴，时间为横轴建立直角坐标系
		
		- 表示模拟信号的曲线经过了无限多个数值点
			
		- 表示数字信号的竖直线表示了信号值到值的突变

- 周期信号与非周期信号
	
	- 周期信号periodic signal在一个可测量的时间范围内（一个周期period）完成一种模式，并且在后续的相同时间范围内重复这一模式。一个完整模式的实现称为一个循环
		
	- 非周期信号nonperiodic signal的变换则不会随时间的变化出现重复的模式或循环
		
	- 周期模拟信号需要更少的带宽，非周期数字信号可以表示数据的变化

### 周期模拟信号

- 正弦波
	
	​正弦波是不能再被分解的简单模拟信号，由峰值振幅、频率和相位三个参数完全确定；复合型模拟信号是由多个正弦波信号组成的
	
	- 峰值振幅：最高强度的绝对值，与所携带的能量成比例（对电信号，常以伏特为单位计量）
		
	- 周期与频率：周期Period是信号完成一个循环所用时间，单位秒；频率Frequency是1s内完成的周期数，单位赫兹
		
		- 频率既可以看做一秒钟完成的周期数，也可以看作变化速率的计量单位（变化占用的时间短意味着频率高，变化占用的时间长意味着频率低）
			
		- 信号持续不变化，则频率值为0；由一个电平立即跳变到另一电平，频率值为无穷大

- 相位phase
	
	相位指波形相对于时间零的位置

- 波长wavelength
	
	波长是信号通过传输介质传播的另一个特性，将简单正弦波的周期或频率与介质的传播速度propagation speed结合在一起
	
	- 信号的频率与介质无关，但波长取决于频率和介质，波长是任何信号的一个属性
		
	- 在数据通信中，一般用波长来描述光纤中的光传输。波长是简单信号在一个周期能传播的距离
		
	- 波长=传播速度×周期。电磁信号的传播速度取决于介质和信号频率


- 时域time-domain和频域frequency-domain
	
	- 时域图time-domain plot显示了信号振幅随时间的变化情况，相位在其中没有显式的表现出来
		
	- 频域图frequency-domain plot只和峰值、频率相关，不显示一个周期中的振幅变化。通过一个尖峰表示完整的正弦波，其位置表示频率，其高度表示峰值振幅
		
	- 处理多个正弦波时，频域图更简洁有用


- 复合信号composite signal
	
	单一正弦波将电子能量从一个位置传送到另一个位置，但不会携带任何信息；复合信号才能用来通信
	
	- 傅里叶分析指出，任何复合信号都是由具有不同频率、相位和振幅的正弦波信号组合成的
		
	- 复合信号可以是周期性的或非周期的。周期复合信号可以分解成一系列具有离散频率的简单正弦波；非周期复合信号可以分解成具有连续频率的无穷简单正弦波的组合
		
	- 与周期性复合信号频率相同的分解正弦波频率为f，称为基础频率（fundanmental）、第一谐波（harmonic）；其他频率为kf的，称为第k谐波。分解后的信号频率是离散的，k为整数。周期复合信号的频率总是由离散尖峰组成
		
	- 对于非周期复合信号，时域表示有无数个简单正弦频率，但频率的范围是有限的，频域表示是一条连续的曲线


- 带宽bandwidth
	
	- 复合信号包含的频率范围叫带宽，通常是最大频率与最小频率之差


- 非周期复合信号的例子：
	
	- 有调幅AM无线电站传播的信号（美国分配给每个AM无线电站10kHz带宽，总带宽从530kHz到1700kHz）
		
	- 调频FM无线电站传播的信号（美国分配给每个FM无线电站200kHz带宽，总带宽从88MHz到108MHz）
		
	- 黑白电视接收信号，屏幕扫描次数×像素总值即使每秒变化的像素，以最低振幅、最高振幅各表示一种颜色则每周期可发送2像素，故二者之商是每秒所需要周期，由此可以得出需要带宽。大约每个黑白电视频道有4MHz带宽


### 数字信号

如果信号有 L 个电平，则每个电平需要 $\log_{2}L$ 个位。由此，多个电平可以发送多个位。每个电平发送的位数必须是整数且是2的幂，故电平取值为向上取整

- 比特率bit rate：1s中发送的位数，单位是bps（bits per second每秒位）

- 位长bit length：一个位在传输介质上的距离。位长=传播速度×位持续时间

- 数字信号是一种复合模拟信号
	
	基于傅里叶分析，数字信号是复合模拟信号
	
	- 带宽是无穷大的。因为在时域中，数字信号由连接的垂直和水平线段组成，垂直线表示无穷大的频率，水平线表示0频率
		
	- 运用傅里叶分析分解数字信号：
		
		- 如果数字信号是周期性的，分解后的信号可以表示为无穷大带宽和离散频率的频域
			
		- 非周期性的，则是无穷大带宽和连续的频率

#### 数字信号的传输

数字信号是无穷大带宽的复合模拟信号

- 基带传输
	
	- 通过通道发送数字信号，该信号不转换成模拟信号
		
	- 基带baseband传输需要一个带宽下限频率为0的低通通道（low-pass channel），此时带宽只组成一条通道的专用介质。无穷大带宽的低通通道仅是理想情况，现实中不可能存在
		
	- 两种低通通道：
		
		- 宽带宽：只有在无穷大或非常大带宽的低通通道，保持数字信号形状的数字信号基带传输才是可能的
			
			注意例3.21，LAN使用专用通道（介质的整个带宽用于一条单通道）用于两个站之间互相通信。多点连接的总线拓扑结构LAN中，每个时刻只有两个站可以互相通信，其他站限制发送数据；星型拓扑结构中，每个站和集线器之间的整个通道用于这两个实体间通信
			
		- 窄带宽：此中，将数字信号近似成模拟信号，近似程度取决于可用的带宽
			
			- 大致近似：对于比特率为N的数字信号，用频率为f=N/2的模拟信号（每个周期发送两位，以1为正尖峰值，0为负尖峰值）作为最大频率，其他如N/4频率及不同相位可以大致近似表示不同的数字信号。大致近似称为第一谐波N/2频率
				
			- 更好近似：增加频率更多的谐波来使得模拟信号的形状更像数字信号，因此要增加带宽，如增加带宽到3N/2、5N/2、7N/2等
				
			
		
	- 在基带运输中，所需的带宽与比特率成正比；如果需要更快地发送位，就需要更大的带宽
		
	- 应用：
		
		- 如果需要使用基带传输发送1Mbps，则低通通道所需带宽是多少？
			
			取决于所需的准确性
			
			- 最小带宽、大致近似，则B=1Mbps÷2=500kHz
				
			- 使用第一和第三谐波结果更好，所需带宽B=3×500kHz=1.5MHz
				
			- 使用第一、第三、第五谐波仍然更好，则B=5×500kHz=2.5MHz
				
			
		- 有一条带宽为100kHz的低通通道，求其最大比特率：使用第一谐波可以得到最大比特率，比特率是2倍有效带宽，即200kbps

- 宽带传输（使用调制）
	
	即把数字信号转换成模拟信号运输
	
	- 调制允许使用带通通道bandpass channel，即带宽不从0开始的通道，其比低通通道更可用。低通通道可以看作是较低频率从0开始的带通通道
		
	- 数字信号的调制过程：发送方，数字信号转换成复合模拟信号，使用单频率模拟信号（载波）已经改变的载波振幅使其看起来像数字信号（结果不是单频率信号，是复合信号）；接收方，接收到的模拟信号转换成数字信号
		
	- 注意例3.24、例3.25，分别是通过电话用户线传输计算机数据和数字蜂窝电话。对于数字蜂窝电话实例，如果有效带宽是W，且允许1000对用户同时交谈，意味着有效带宽是W/1000，只是整个带宽的一部分


### 传输减损

#### 衰减attenuation

- 意味着能量的损失。当某种简单或者复合的信号通过某种介质传输时，它会失去一些能量用于克服介质的阻抗，信号中的一部分电能转换成热能（为了补偿能量损失，可用放大器放大信号）
	
- 分贝decibel：
	
	用于计算两种信号之间或者同一信号在两个不同位置之间的相对强度
	
	- $dB=10\log_{10} \frac{P_{2}}{P_{1}}$，P1 和 P2 分别是信号在位置 1 和位置 2 的功率；
	- 若以电压定义分贝，则公式为 $dB=20\log_{10} \frac{V_2}{V_1}$
		
	- dB为负值，则信号被衰减了；dB为正值，信号被放大了。-3dB或3dB衰减等价于功率损失了一半
		
	- 当涉及计量多处（级联）而不仅仅是两处的信号强度时，分贝数可以相加（相减）
		
	- 以毫瓦计量信号功率：$dB_{m}=10\log_{10} P_{m}$，$P_m$ 是以毫瓦为单位的功率

#### 失真distortion

- 意味着信号改变了形态或形状，产生在由不同频率成分组成的复合信号当中
	
- 每一种信号成分在通过介质时有自己的传播速度，到达最终目的节点时有各自的延迟。如果延迟与周期时间不完全一致，那么延迟的差异就会产生相位的差异，即接收方的信号成分与发送方的信号成分存在相位差异。由此出现复合信号的失真

#### 噪声noise

- 类型：
	
	- 热噪声：电缆中的电子随机移动产生的额外信号
		
	- 感应噪声：发动机和设备工作时相当于发射天线，而传输介质成为接收天线
		
	- 串扰：电缆之间的相互影响，一条电缆作为发射天线而另一条作为接收天线
		
	- 脉冲噪声：一种尖峰信号，非常短时间内有很高能量的一种信号，来自传输电线、闪电等


- 信噪比SNR（signal-to-noise ratio)
	
	- $SNR=\frac{平均信号功率}{平均噪声功率}$，即所需信号和无用信号的比率。较高的SNR意味着信号较少地被噪声破坏，较低地SNR则意味着信号较多的被噪声破坏
		
	- 用分贝单位描述 SNR，即 $SNR_{dB} = 10\log_{10}SNR$。对于无噪声通道的 SNR 为 $+∞$，SNR（dB）也为 $+∞$


### 数据速率限制

数据通信的一个重要问题：在一个通道中能够以多快的速率发送数据，即每秒钟的比特数

- 取决因素
	
	- 有效带宽
		
	- 使用的信号电平数
		
	- 通道的质量（噪声电平）


#### 奈奎斯特公式Nyquist bit rate

- 用于无噪声通道，定义了理论上的最大比特率：
	- $比特率=2×带宽×\log_{2}L$
	
- 虽然在理论上由此公式可认为给定特定的带宽可以通过增加信号电平数获得任何我们想要的比特率，但实际上**电平数的增加增大了接收方的负担，对方很难区分多个电平**。增加信号电平数减弱了系统的可靠性
	
- 奈奎斯特公式可以应用到基带传输和调制，也可以应用到有两个或多个信号电平的情况


#### 香农容量定理Shannon Capacity

- 能够确定噪声通道理论上的最高数据速率：
	- $通道容量=带宽×\log_{2}(1+SNR)$，通道容量是指通道的传输容量，即每秒的比特数

- 公式中没有指出信号电平，意味着无论使用多少个电平，都不能获得比通道容量更高的数据速率。**公式定义了通道的特性，而不是传输方式**

- 对于信噪比 SNR 接近于0的通道，其容量计算也为0，且与带宽无关，通过此通道不能接收到任何数据 

- 要使得数据发送速率更宽，需要更大的线路带宽或更高的信噪比

- SNR 很大时，SNR+1与 SNR 几乎相等，此时可以简化计算：$通道容量 C=\frac{带宽B×SNR_{dB}}{3}$ 

- 二者结合使用，先用香农容量定理确定数据速率的上限，再以确定的数据速率利用奈奎斯特公式计算信号电平的数量（为了获得更好的性能，可选择较低的数据速率）


### 性能

#### - 带宽

- 以赫兹衡量的带宽：复合信号包含的频率范围或通道能通过的频率范围
	
- 以每秒比特数衡量的带宽：指通道、链路或者网络每秒能发送的位数
	
- 两者关系：以赫兹衡量的带宽的增长意味着以每秒位数衡量的带宽的增长。之间的关系取决于是否有基带传输或者调制传输


#### 吞吐量 throughput

用于衡量通过网络发送数据的快慢

- 与以每秒位数衡量的带宽是不同的。带宽是链路的潜在衡量值，而吞吐量是发送速度快慢的实际衡量值，实际永远比潜在小
	
- 吞吐率=位总数÷时间


#### 延迟delay

定义了第一个位从源开始发出到整个报文完全到达目标所经历的时间。延迟=传播时间+传输时间+排队时间+处理延迟

- 传播时间propagation time:衡量一个位从源传输到目标所需的时间。传播时间=距离/传播速度
	
- 传输时间transmission time:传输时间=报文长度/带宽
	
- 排队时间queuing time:每个中间或端设备在处理报文前所需的时间。这个不是固定因素，会随着网络负载而改变。中间设备（如路由器）对到达报文进行排队然后一个个处理，吐过报文过多，每个报文就不得不等待
	
- 处理延迟processing delay

#### 带宽延迟之积

是能充满链路的位的个数。类比于水管的容量，横截面为带宽，长度为延迟

- 为了使用链路的最大容量，需要脉冲长度是宽带和延迟乘积的两倍，需要充满全双工通道
	
- 发送者应该发送一个（2×带宽×延迟）位的数据脉冲，然后发送方在发送下一个脉冲前等待这个脉冲部分的接收方的确认。（2×带宽×延迟）是任何时刻转换的位数


#### 抖动 jitter

如果数据的不同分组碰到不同的延迟并且接收方使用数据的应用是时间敏感的，抖动就可能会产生问题
