### 4.4.6　4.4节的练习

练习4.4.1：为下面的每一个文法设计一个预测分析器，并给出预测分析表。你可能先要对文法进行提取左公因子或消除左递归的操作。

1）练习4.2.2（1）中的文法。

2）练习4.2.2（2）中的文法。

3）练习4.2.2（3）中的文法。

4）练习4.2.2（4）中的文法。

5）练习4.2.2（5）中的文法。

6）练习4.2.2（7）中的文法。

！！练习4.4.2：有没有可能通过某种方法修改练习4.2.1中的文法，构造出一个与该练习中的语言（运算分量为a的后缀表达式）对应的预测分析器？

练习4.4.3：计算练习4.2.1的文法的FIRST和FOLLOW集合。

练习4.4.4：计算练习4.2.2中各个文法的FIRST和FOLLOW集合。

练习4.4.5：文法S→aSa | aa 生成了所有由a组成的长度为偶数的串。我们可以为这个文法设计一个带回溯的递归下降分析器。如果我们选择先用产生式S→aa展开，那么我们只能识别到串aa。因此，任何合理的递归下降分析器将首先尝试S→aSa。

1）说明这个递归下降分析器识别输入aa、aaaa和aaaaaaaa，但是识别不了aaaaaa。

！！2）这个递归下降分析器识别什么样的语言？

下面的练习是构造任意文法的“Chomsky范式”的有用步骤。Chomsky范式将在练习4.4.8中定义。

！练习4.4.6：如果一个文法没有产生式体为∈的产生式（称为∈产生式），那么这个文法就是无∈产生式的。

1）给出一个算法，它的功能是把任何文法转变成一个无∈产生式的生成相同语言的文法（唯一可能的例外是空串——没有哪个无∈产生式的文法能生成∈）。提示：首先找出所有可能为空的非终结符号。非终结符号可能为空是指它（可能通过很长的推导）生成∈。

2）将你的算法应用于文法S→aSbS | bSaS | ∈。

！练习4.4.7：单产生式（single production）是指其产生式体为单个非终结符号的产生式，即形如A→B的产生式，其中A、B为任意的非终结符号。

1）给出一个算法，它可以把任何文法转变成一个生成相同语言（唯一可能的例外是空串）的、无∈产生式、无单产生式的文法。提示：首先消除∈-产生式，然后找出所有满足下列条件的非终结符号对A和B：存在一系列单产生式使得![162-1](../Images/image04201.jpeg)。

2）将你的算法应用于4.1.2节的算法（4.1）。

3）说明作为（1）的一个结果，我们可以把一个文法转变为一个没有环（即对某个非终结符号A存在一步或多步的推导![162-2](../Images/image04202.jpeg)）的等价文法。

！！练习4.4.8：如果一个文法的每个产生式要么形如A→BC，要么形如A→a，其中A、B和C是非终结符号，而a是终结符号，那么这个文法就称为Chomsky范式（Chomsky Normal Form，CNF）文法。说明如何将任意文法转变成一个生成相同语言（唯一可能的例外是空串——没有CNF文法可以生成∈）的CNF文法。

！练习4.4.9：对于每个具有上下文无关文法的语言，其长度为n的串可以在O（n3）的时间内完成识别。完成这种识别工作的一个简单方法称为Cocke-Younger-Kasami（CYK）算法。该算法基于动态规划技术。也就是说，给定一个串a1a2…an，我们构造出一个n×n的表T使得Tij是可以生成子串aiai+1…aj的非终结符号的集合。如果基础文法是CNF的（见练习4.4.8），那么只要我们按照正确的顺序来填表：先填j-i值最小的条目，则表中的每一个条目都可以在O（n）时间内填写完毕。给出一个能够正确填写这个表的条目的算法，并说明你的算法的时间复杂度为O（n3）。填完这个表之后，你如何判断a1a2…an是否在这个语言中？

！练习4.4.10：说明我们如何能够在填好练习4.4.9中的表之后，在O（n）时间内获得a1a2…an对应的一棵语法分析树？提示：修改练习4.4.9中的表T，使得对于表的每个条目Tij中的每个非终结符号A，这个表同时记录了其他条目中的哪两个非终结符号组成的对偶使得我们将A放到Tij中。

！练习4.4.11：修改练习4.4.9中的算法，使得对于任意符号串，它可以找出至少需要执行多少次插入、删除和修改错误（每个错误是一个字符）的操作才能将这个串变成基础文法的语言的句子。

！练习4.4.12：图4-24中给出了对应于某些语句的文法。你可以将e和s当作分别代表条件表达式和“其他语句”的终结符号。如果我们按照下列方法来解决因为展开可选“else”（非终结符号stmtTail）而引起的冲突：当我们从输入中看到一个else时就选择消耗掉这个else。使用4.4.5节中描述的同步符号的思想：

![163-1](../Images/image04203.jpeg)

图4-24　某种类型语句的文法

1）为这个文法构造一个带有错误纠正信息的预测分析表。

2）给出你的语法分析器在处理下列输入时的行为：

（a）if e then s；if e then s end

（b）while e do begin s；if e then s；end