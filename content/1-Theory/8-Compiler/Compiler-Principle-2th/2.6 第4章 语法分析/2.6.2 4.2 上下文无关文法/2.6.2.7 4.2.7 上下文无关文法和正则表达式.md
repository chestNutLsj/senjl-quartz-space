### 4.2.7　上下文无关文法和正则表达式

在结束关于文法及其性质的讨论之前，我们要说明文法是比正则表达式表达能力更强的表示方法。每个可以使用正则表达式描述的构造都可以使用文法来描述，但是反之不成立。换句话说，每个正则语言都是一个上下文无关语言，但是反之不成立。

比如，正则表达式（a|b）*abb和文法

A0→aA0 | bA0 | aA1

A1→bA2

A2→bA3

A3→∈

描述了同一个语言，即以abb结尾的由a和b组成的串的集合。

我们可以机械地构造出和一个不确定有穷自动机（NFA）识别同样语言的文法。上面的文法是使用下面的构造方法，根据图3-24中的NFA构造得到的。

1）对于NFA的每个状态i，创建一个非终结符号Ai。

2）如果状态i有一个在输入a上到达状态j的转换，则加入产生式Ai→aAj。如果状态i在输入∈上到达状态j，则加入产生式Ai→Aj。

3）如果i是一个接受状态，则加入产生式Ai→∈。

4）如果i是自动机的开始状态，令Ai为所得文法的开始符号。

另一方面，语言L={anbn | n≥1}（即由同样数量的a和b组成的串的集合）是一个可以用文法描述但不能用正则表达式描述的语言的原型例子。下面用反证法来说明这一点。假设L是用某个正则表达式定义的语言。我们可以构造一个具有有穷多个状态（比如说k个状态）的DFA D来接受L。因为D只有k个状态，对于一个以多于k个a开头的输入，D一定会进入某个状态两次，假设这个状态是si，如图4-6所示。假设从si返回到其自身的路径的标号序列是aj-i。因为aibi在这个语言中，因此必然存在一条标号为bi 从si到某个接受状态f的路径。但是，一定还存在一条从开始状态s0出发，经过si 最后到达f的路径，它的标号序列为ajbi，如图4-6所示。因此，D也接受ajbi，但ajbi这个串不在语言L中，这和L是D所接受的语言这个假设矛盾。

![145-2](../Images/image04162.jpeg)

图4-6　接受aibi和ajbi的DFA D

我们通俗地说“有穷自动机不能计数”，这意味着有穷自动机不能接受像{anbn|n≥1}这样的语言，因为它不能记录下在它看到第一个b之前读入的a的个数。类似地，“一个文法可以对两个个体进行计数，但是无法对三个个体计数”，我们在4.3.5节中考虑非上下文无关的语言构造时将介绍这一点。