### 4.2.4　语法分析树和推导

语法分析树是推导的图形表示形式，它过滤掉了推导过程中对非终结符号应用产生式的顺序。语法分析树的每个内部结点表示一个产生式的应用。该内部结点的标号是此产生式头中的非终结符号A；这个结点的子结点的标号从左到右组成了在推导过程中替换这个A的产生式体。

比如，图4-3中，-（id + id）的语法分析树是根据推导（4.8）得到的，它也可以根据推导（4.9）得到。

![142-8](../Images/image04156.jpeg)

图4-3　-（id+id）的语法分析树

一棵语法分析树的叶子结点的标号既可以是非终结符号，也可以是终结符号。从左到右排列这些符号就可以得到一个句型，它称为这棵树的结果（yield）或边缘（frontier）。

为了了解推导和语法分析树之间的关系，考虑任意的推导α1⇒α2⇒…⇒αn，其中α1是单个非终结符号A。对于推导中的每个句型αi，我们可以构造出一个结果为αi的语法分析树。这个构造过程是对i的一次归纳过程。

基础：α1=A的语法分析树就是标号为A的单个结点。

归纳步骤：假设我们已经构造出了一棵结果为αi-1=X1X2…Xk的语法分析树（请注意，按照我们的符号表示约定，每个文法符号Xi可以是非终结符号，也可以是终结符号）。假设αi是将αi-1中的某个非终结符号Xj替换为β=Y1Y2…Ym而得到的句型。也就是说，在这个推导的第i步中，对αi-1应用规则Xj→β，推导出αi=X1X2…Xj-1βXj+1…Xk。

为了模拟这一推导步骤，我们在当前的语法分析树中找出左起第j个非∈叶子结点。这个结点的标号为Xj。向这个叶子结点添加m个子结点，从左边开始分别将这些子结点标号为Y1、Y2、…、Ym。作为一种特殊情况，如果m=0，那么β=∈，我们给第j个叶子结点加上一个标号为∈的子结点。

例4.10　根据推导（4.8）构造得到的语法分析树的序列显示在图4-4中。推导的第一步是E⇒-E。为了模拟这一步，我们将标号分别为-和E的两个子结点加到第一棵树的根结点E上，得到第二棵语法分析树。

这个推导的第二步是-E⇒-（E）。相应地，将标号分别为（、E、）的三个子结点加到第二棵树中标号为E的叶子结点上，得到结果为-（E）的第三棵树。按照这个方法继续下去，我们就得到了完整的语法分析树，即第六棵树。

因为语法分析树忽略了替换句型中符号的不同顺序，所以在推导和语法分析树之间具有多对一的关系。比如，推导（4.8）和（4.9）都和图4-4中的最后一棵语法分析树关联。

![143-1](../Images/image04157.jpeg)

图4-4　推导（4.8）的语法分析树序列

因为在语法分析树和最左推导/最右推导之间存在一对一的关系，所以在接下来的内容中，我们将频繁地通过构造最左推导或最右推导来进行语法分析。最左或最右推导都以一种特定的顺序来替换句型中的符号，因此它们也过滤掉了顺序上的不同。不难说明，每一棵语法分析树都和唯一的最左推导及唯一的最右推导相关联。