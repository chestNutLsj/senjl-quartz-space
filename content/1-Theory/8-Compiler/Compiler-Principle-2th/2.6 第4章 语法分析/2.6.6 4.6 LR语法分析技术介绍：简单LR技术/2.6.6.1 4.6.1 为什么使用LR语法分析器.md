### 4.6.1　为什么使用LR语法分析器

LR语法分析器是表格驱动的，在这一点上它和4.4.4节中提到的非递归LL语法分析器很相似。如果我们可以使用本节和下一节中的某个方法为一个文法构造出语法分析表，那么这个文法就称为LR文法（LR grammar）。直观地讲，只要存在这样一个从左到右扫描的移入-归约语法分析器，它总是能够在某文法的最右句型的句柄出现在栈顶时识别出这个句柄，那么这个文法就是LR的。

LR语法分析技术很有吸引力，原因如下：

- 对于几乎所有的程序设计语言构造，只要能够写出该构造的上下文无关文法，就能够构造出识别该构造的LR语法分析器。确实存在非LR的上下文无关文法，但一般来说，常见的程序设计语言构造都可以避免使用这样的文法。
- LR语法分析方法是已知的最通用的无回溯移入-归约分析技术，并且它的实现可以和其他更原始的移入-归约方法（见参考文献）一样高效。
- 一个LR语法分析器可以在对输入进行从左到右扫描时尽可能早地检测到错误。
- 可以使用LR方法进行语法分析的文法类是可以使用预测方法或LL方法进行语法分析的文法类的真超集。一个文法是LR（k）的条件是当我们在一个最右句型中看到某个产生式的右部时，我们再向前看k个符号就可以决定是否使用这个产生式进行归约。这个要求比LL（k）文法的要求宽松很多。对于LL（k）文法，我们在决定是否使用某个产生式时，只能向前看该产生式右部推导出的串的前k个符号。因此，LR文法能够比LL文法描述更多的语言就一点也不奇怪了。

LR方法的主要缺点是为一个典型的程序设计语言文法手工构造LR分析器的工作量非常大。我们需要一个特殊的工具，即一个LR语法分析器生成工具。幸运的是，有很多这样的生成工具可用，我们将在4.9节讨论其中最常用的工具Yacc。这种生成工具将一个上下文无关文法作为输入，自动生成一个该文法的语法分析器。如果该文法含有二义性的构造，或者含有其他难以在从左到右扫描时进行语法分析的构造，那么语法分析器生成工具将对这些构造进行定位，并给出详细的诊断消息。