### 4.7.3　规范LR（1）语法分析表

现在我们给出根据LR（1）项集构造LR（1）的ACTION和GOTO函数的规则。和前面一样，这些函数将用一个表来表示，只是表格条目中的值有所不同。

算法4.56　规范LR语法分析表的构造。

输入：一个增广文法G′。

输出：G′的规范LR语法分析表的函数ACTION和GOTO。

方法：

1）构造G′的LR（1）项集族C′={I0，I1，…，In}。

2）语法分析器的状态i根据Ii构造得到。状态i的语法分析动作按照下面的规则确定：

① 如果［A→α·aβ，b］在Ii中，并且GOTO（Ii，a）=Ij，那么将ACTION［i,a］设置为“移入j”。这里a必须是一个终结符号。

② 如果［A→α·，a］在Ii中且A≠S′，那么将ACTION［i，a］设置为“规约A→α”。

③ 如果［S′→S·，$］在Ii中，那么将ACTION［i，$］设置为“接受”。

如果根据上述规则会产生任何冲突动作，我们就说这个文法不是LR（1）的。在这种情况下，这个算法无法为该文法生成一个语法分析器。

3）状态i相对于各个非终结符号A的goto转换按照下面的规则构造得到：如果GOTO（Ii，A）= Ij，那么GOTO［i，A］=j。

4）所有没有按照规则（2）和（3）定义的分析表条目都设为“报错”。

5）语法分析器的初始状态是由包含［S′→·S，$］的项集构造得到的状态。

由算法4.56生成的语法分析动作和GOTO函数组成的表称为规范LR（1）语法分析表。使用这个表的LR语法分析器称为规范LR（1）语法分析器。如果语法分析动作函数中不包含多重定义的条目，那么给定的文法就称为LR（1）文法。和前面一样，在大家都了解的情况下我们将省略“（1）”。

例4.57　文法（4.55）的规范语法分析表如图4-42所示。产生式1、2和3分别是S→CC，C→cC和C→d。

![185-1](../Images/image04245.jpeg)

图4-42　文法（4.55）的规范LR语法分析表

每个SLR（1）文法都是LR（1）文法。但是对于一个SLR（1）文法而言，规范LR（1）语法分析器的状态要比同一文法对应的SLR语法分析器的状态多。前一个例子中的文法是SLR的，它的SLR语法分析器有七个状态；相比之下，图4-42中有十个状态。