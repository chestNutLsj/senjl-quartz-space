### 2.8.1　两种中间表示形式

正如我们在2.1节（特别是在图2-4中）指出的，两种最重要的中间表示形式是：

- 树型结构，包括语法分析树和（抽象）语法树。
- 线性表示形式，特别是“三地址代码”。

抽象语法树（或简称语法树）曾在2.5.1节中介绍过。我们将在5.3.1节中更加正式地探讨它。在语法分析过程中，将创建抽象语法树的结点来表示有意义的程序构造。随着分析的进行，信息以与结点相关的属性的形式被添加到这些结点上。选择哪些属性要依据待完成的翻译来决定。

另一方面，三地址代码是一个由基本程序步骤（比如将两个值的相加）组成的序列。和树形结构不一样，它没有层次化的结构。正如我们将在第9章中看到的那样，如果我们想对代码做出显著的优化，就需要这种表示形式。在那种情况下，我们可以把组成程序的很长的三地址语句序列分解为“基本块”。所谓基本块就是一个总是逐个顺序执行的语句序列，执行时不会出现分支跳转。

除了创建一个中间表示之外，编译器前端还会检查源程序是否遵循源语言的语法和语义规则。这种检查称为静态检查（static check），“静态”一般是指“由编译器完成”[^11]。静态检查确保一些特定类型的程序错误，包括类型不匹配，能在编译过程中被检测并报告。

编译器可以在创建抽象语法树的同时生成三地址代码序列。然而，在通常情况下，编译器实际上并不会创建出存放了整棵抽象语法树的数据结构，它仅仅“假装”构造了一棵抽象语法树，同时生成三地址代码。编译器在分析过程中只会保存将用于语义检查或其他目的的结点及其属性，同时也保存了用于语法分析的数据结构，而不会保存整棵抽象语法树。经过这样的处理，构造三地址代码时要使用到的那部分语法树在需要时都是可用的，一旦不再需要就会被释放。我们将在第5章详细讨论这个过程。