### 2.6.1　剔除空白和注释

2.5节的表达式翻译器读取输入中的每个字符，所以任何无关字符，比如空格，都会使它运行失败。大部分语言允许词法单元之间出现任意数量的空白。在语法分析过程中同样会忽略源程序中的注释，所以这些注释也可以当作空白处理。

如果词法分析器消除了空白，那么语法分析器就不必再考虑它们了。当然，也可以修改文法使得语法中包含空白，但是实现这个方法远非易事。

图2-29中的伪代码在遇到空格、制表符或换行符时不断读取输入字符，从而跳过了空白部分。变量peek存放了下一个输入字符。在错误消息中加入行号和上下文有助于定位错误。这个代码使用变量line统计输入中的换行符个数。

![063-2](../Images/image04004.jpeg)

图2-29　跳过空白部分