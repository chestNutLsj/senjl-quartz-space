### 2.6.2　预读

在决定向语法分析器返回哪个词法单元之前，词法分析器可能需要预先读入一些字符。例如，C或Java的词法分析器在遇到字符>之后必须预先读入一个字符。如果下一个字符是=，那么>就是字符序列>=的一部分，这个序列是代表“大于等于”运算符的词法单元的词素。否则>本身形成了“大于”运算符，词法分析器就多读了一个字符。

一个通用的预先读取输入的方法是使用输入缓冲区。词法分析器可以从缓冲区中读取一个字符，也可以把字符放回缓冲区。即使仅从效率的角度看，使用缓冲区也是有意义的，因为一次读取一块字符要比每次读取单个字符更加高效。我们可以用一个指针来跟踪已被分析的输入部分，向缓冲区放回一个字符可以通过回移指针来实现。输入缓冲技术将在3.2节中讨论。

因为通常只需预读一个字符，所以一种简单的解决方法是使用一个变量，比如peek，来保存下一个输入字符。在读入一个数字的数位或一个标识符的字符时，本节的词法分析器会预读一个字符。例如，它在1后面预读一个字符来区分1和10，在`t`后预读一个字符来区分`t`和`true`。

词法分析器只在必要时才进行预读。像*这样的运算符不需预读就能够识别。在这种情况下，peek的值被设置为空白符。词法分析器在寻找下一个词法单元时会跳过这个空白符。本节中的词法分析器的不变式断言如下：当词法分析器返回一个词法单元时，变量peek要么保存了当前词法单元的词素后的那个字符，要么保存空白符。