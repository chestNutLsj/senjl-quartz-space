### 2.2.3　语法分析树

语法分析树用图形方式展现了从文法的开始符号推导出相应语言中的符号串的过程。如果非终结符号A有一个产生式A→XYZ，那么在语法分析树中就可能有一个标号为A的内部结点，该结点有三个子结点，从左向右的标号分别为X、Y、Z：

![043-1](../Images/image03973.jpeg)

正式地讲，给定一个上下文无关文法，该文法的一棵语法分析树（parse tree）是具有以下性质的树：

1）根结点的标号为文法的开始符号。

2）每个叶子结点的标号为一个终结符号或∈。

3）每个内部结点的标号为一个非终结符号。

4）如果非终结符号A是某个内部结点的标号，并且它的子结点的标号从左至右分别为X1，X2，…，Xn，那么必然存在产生式A→X1X2…Xn，其中X1，X2，…，Xn既可以是终结符号，也可以是非终结符号。作为一个特殊情况，如果A→∈是一个产生式，那么一个标号为A的结点可以只有一个标号为∈的子结点。

关于树型结构的术语

树型数据结构在编译系统中起着重要的作用。

- 一棵树由一个或多个结点（node）组成。结点可以带有标号（label），在本书中标号通常是文法符号。当我们画一棵树时，我们常常只用这些标号来代表相应的结点。
- 树有且只有一个根（root）结点。每个非根结点都有唯一的父（parent）结点；根结点没有父结点。当我们画树的时候，将一个结点的父结点画在它的上方，并在父、子结点之间画一条边。因此根结点是最高的（顶层的）结点。
- 如果结点N是结点M的父结点，那么M就是N的子（child）结点。一个结点的各个子结点彼此称为兄弟（sibling）结点。它们之间是有序的，按照从左向右的方式排列。在我们画一棵树时也遵循这个顺序排列给定结点的子结点。
- 没有子结点的结点称为叶子（leaf）结点。其他结点，即有一个或多个子结点的结点，称为内部结点（interior node）。
- 结点N的后代（descendant）结点要么是结点N本身，要么是N的子结点，要么是N的子结点的子结点，依此类推（可以为任意层次）。如果结点M是结点N的后代结点，那么结点N是结点M的祖先（ancestor）结点。

例2.4　例2.2中`9-5+2`的推导可以用图2-5中的树来演示。树中每个结点的标号都是一个文法符号。每个内部结点和它的子结点都对应于一个产生式。其中，内部结点对应于产生式的头，它的子结点对应于产生式的体。

在图2-5中，根结点的标号为list，即例2.1中文法的开始符号。根结点的子结点的标号从左向右分别为list、+和digit。请注意：

list→list + digit

![044-1](../Images/image03974.jpeg)

图2-5　根据例2.1中的文法得到的`9-5+2`的语法分析树

是例2.1中文法的产生式。根结点的左子结点和根结点类似，只是它的中间子结点的标号为-而不是+。三个标号为digit的结点中，每个结点都有一个以具体数位为标号的子结点。

一棵语法分析树的叶子结点从左向右构成了树的结果（yield），也就是从这棵语法分析树的根结点上的非终结符号推导得到（或者说生成）的符号串。在图2-5中的结果是`9-5+2`。为了方便起见，我们将所有叶子结点都放在底层。以后我们不一定会把叶子结点按照这种方法排列。任何树的叶子结点都有一个自然的从左到右的顺序。这个顺序基于如下思想：如果X和Y是同一个父结点的子结点，并且X在Y的左边，那么X的所有后代结点都在Y的所有后代结点的左边。

一个文法的语言的另一个定义是指任何能够由某棵语法分析树生成的符号串的集合。为一个给定的终结符号串构建一棵语法分析树的过程称为对该符号串进行语法分析。