### 2.2.1　文法定义

一个上下文无关文法（context-free grammar）由四个元素组成：

1）一个终结符号集合，它们有时也称为“词法单元”。终结符号是该文法所定义的语言的基本符号的集合。

2）一个非终结符号集合，它们有时也称为“语法变量”。每个非终结符号表示一个终结符号串的集合。我们将在后面介绍这种表示方法。

3）一个产生式集合，其中每个产生式包括一个称为产生式头或左部的非终结符号，一个箭头，和一个称为产生式体或右部的由终结符号及非终结符号组成的序列。产生式主要用来表示某个构造的某种书写形式。如果产生式头非终结符号代表一个构造，那么该产生式体就代表了该构造的一种书写方式。

4）指定一个非终结符号为开始符号。

词法单元和终结符号

在编译器中，词法分析器读入源程序中的字符序列，将它们组织为具有词法含义的词素，生成并输出代表这些词素的词法单元序列。词法单元由两个部分组成：名字和属性值。词法单元的名字是语法分析器进行语法分析时使用的抽象符号。我们常常把这些词法单元名字称为终结符号，因为它们在描述程序设计语言的文法中是以终结符号的形式出现的。如果词法单元具有属性值，那么这个值就是一个指向符号表的指针，符号表中包含了该词法单元的附加信息。这些附加信息不是文法的组成部分，因此在我们讨论语法分析时，通常将词法单元和终结符号当做同义词。

在描述文法的时候，我们会列出该文法的产生式，并且首先列出开始符号对应的产生式。我们假设数位、符号（如<、<=）和黑体字符串（如while）都是终结符号。斜体字符串表示非终结符号，所有非斜体的名字或符号都可以看作是终结符号[^1]。为表示方便，以同一个非终结符号为头部的多个产生式的体可以放在一起表示，不同体之间用符号|（读作“或”）分隔。

例2.1　在本章中，有多个例子使用由数位和+、-符号组成的表达式，比如`9-5+2`、`3-1`或`7`。由于两个数位之间必须出现+或-，我们把这样的表达式称为“由+、-号分隔的数位序列”。下面的文法描述了这种表达式的语法。此文法的产生式包括：

list→list + digit　（2.1）

list→list - digit　（2.2）

list→digit　（2.3）

digit→0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9　（2.4）

以非终结符号list为头部的三个产生式可以等价地组合为：

list→list + digit | list - digit | digit

根据我们的习惯，该文法的终结符号包括如下符号：

+ - 0 1 2 3 4 5 6 7 8 9

该文法的非终结符号是斜体名字list和digit。因为list的产生式首先被列出，所以我们知道list是此文法的开始符号。

如果某个非终结符号是某个产生式的头部，我们就说该产生式是该非终结符号的产生式。一个终结符号串是由零个或多个终结符号组成的序列。零个终结符号组成的串称为空串（empty string），记为∈[^2]。