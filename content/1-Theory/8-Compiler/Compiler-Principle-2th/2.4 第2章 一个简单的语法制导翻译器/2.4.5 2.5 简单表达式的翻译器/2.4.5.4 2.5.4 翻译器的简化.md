### 2.5.4　翻译器的简化

在给出完整的程序之前，我们将对图2-25中的代码做两处简化。这个简化将把过程rest展开到过程expr中。在翻译具有多个优先级的表达式时，这样的简化处理可以减少需要使用的过程数目。

首先，某些递归调用可以被替换为迭代。如果一个过程体中执行的最后一条语句是对该过程的递归调用，那么这个调用就称为是尾递归的（tail recursive）。例如，在函数rest中，当向前看符号为`+`和`-`时对rest()的调用都是尾递归的。因为在每个分支中，对rest的递归调用都是调用rest时执行的最后一条语句。

对于没有参数的过程，一个尾递归调用可以被替换为跳转到过程开头的语句。过程rest的代码可以被改写为图2-26中的伪代码。只要向前看符号是一个加号或一个减号，过程rest就和该符号匹配，并调用term来匹配一个数位，然后重复这一过程。否则，它就跳出while循环并从rest返回。

![060-2](../Images/image04000.jpeg)

图2-26　消除图2-25中过程rest的尾递归

其次，整个Java程序还包含另一处修改。一旦图2-25中rest过程的尾递归调用被替换为迭代过程，那么对rest的调用仅仅出现在过程expr中。因此，将过程expr中对rest的调用替换为rest的过程体，就可以将这两个函数合二为一。