### 12.7.1　二分决策图

一个BDD把一个布尔函数表示成为一个带根的DAG图。这个DAG的每个内部结点都用被表示函数的一个变量作为标号。在图的底部是两个叶子，一个标号为0，另一个标号为1。每个内部结点有两条指向子结点的边，这两条边分别称为“低边”和“高边”。低边对应于该结点对应变量取值为0时的情况，而高边对应于相应变量取值为1时的情况。

给定这些变量的一个真假赋值，我们可以从DAG的根开始确定函数的取值。在每个结点上，比如说标号为x的结点上，分别根据x的真假值为0或1来决定沿着相应的低边或高边前进。如果我们最后到达标号为1的叶结点，那么被表示的函数对于这个真假赋值取真值，否则该函数取假值。

例12.27　在图12-31中，我们看到一个BDD。稍后会看到它所表示的函数。请注意，我们已经把所有的“低”边标记为0，所有的“高”边标记为1。考虑对于变量wxyz的真假赋值：w=x=y=0，z=1。从根结点开始，因为w=0，我们选取低边，从而走到最左的标号为x的结点。因为x=0，我们还是从这个结点沿着低边到达最左的标号为y的结点。因为y=0，我们下一步移动到最左的标号为z的结点。现在，因为z=1，我们将选择高边并最后到达标号为1的叶子结点。我们的结论是，这个函数相对于这个真假赋值取真值。

现在考虑真假赋值wxyz=0101，也就是说w=y=0，x=z=1。我们还是从根结点开始。因为w=0，我们还是移动到最左边的标号为x的结点。但这一次因为x=1，我们沿着高边直接跳到叶子结点0。也就是说，我们不仅知道真假赋值0101使得这个函数为假，而且因为不需要查看y或者z的值，任何形如01yz的真假赋值都会使得这个函数取值为0。这个“短路”能力是BDD成为布尔函数的简洁表示方法的理由之一。

图12-31中内部结点分为多个层次——每个层中的结点都使用同一个特定的变量作为标号。虽然这并不是一个绝对的要求，但把我们的讨论范围限制在排序BDD之内会带来方便。在一个排序BDD中，相应的变量有一个排序x1, x2, …, xn，并且不论何时有一条从标号为xi的父结点到标号为xj的子结点的边就意味着i<j。我们将看到，操作排序BDD相对容易，并且从现在开始我们假设所有的BDD都是排序的。

![617-1](../Images/image05096.jpeg)

图12-31　一个二分决策图

还需要注意的是，BDD是有向无环图（DAG），而不是树。不仅仅叶子结点0和1通常有很多父结点，内部结点也可能具有多个父结点。比如，在图12-31中最右的标号为z的结点有两个父结点。把得到同样结果的多个结点合并起来也是BDD通常比较简洁的理由之一。