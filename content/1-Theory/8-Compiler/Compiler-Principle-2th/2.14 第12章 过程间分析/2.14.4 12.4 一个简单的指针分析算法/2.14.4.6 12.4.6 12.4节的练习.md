### 12.4.6　12.4节的练习

练习12.4.1：在图12-24中，h和g用于表示新创建对象的标号，它们不是代码的一部分。你可以假设类型为T的对象有一个字段f。使用本节中的Datalog规则来推导出所有可能的pts和hpts事实。

![610-1](../Images/image05085.jpeg)

图12-24　练习12.4.1的代码

！练习12.4.2：对下列代码

![610-2](../Images/image05086.jpeg)

应用本节中的算法将可以推导出a和b都可能指向h和g。如果代码写成

![610-3](../Images/image05087.jpeg)

我们就能够精确地推导出a可能指向h，且b和c可能指向g。请给出一个可以避免这种不精确情况的过程内数据流分析技术。

！练习12.4.3：如果我们用图12-21中的规则2所描述的复制运算来模拟函数调用和返回操作，就可以把本节中的分析技术扩展为过程间分析技术。也就是说，一个调用把实在参数复制到相应的形式参数中，而函数返回运算把存储返回值的变量复制到被赋予调用结果的变量中。考虑图12-25的程序。

![610-4](../Images/image05088.jpeg)

图12-25　指针指向分析的示例代码

1）对这个代码进行控制流无关的分析。

2）某些在问题1中做出的推导实际上是“假冒的”，也就是说它们并不表示任何可能在运行时刻产生的事件。这个问题的源头可以追溯到对变量b的多次赋值。改写图12-25中的代码，使得没有变量被多次赋值。对修改后的代码再次分析，说明每个推导得到的pts和hpts的事实都会在运行时刻发生。