### 12.4.3　控制流无关性

我们首先给出一个很简单的例子，说明在指针指向分析中忽略控制流带来的影响。

例12.22　图12-20中创建了三个对象h、i和j，并分别赋给变量a、b和c。显然到第3行结束的时候，a指向h，b指向i，c指向j。

![607-1](../Images/image05080.jpeg)

图12-20　例12.22的Java代码

如果接着分析语句4～6，会发现在第4行之后，a只指向i。第5行之后，b只指向j。第6行之后c只指向i。

上面的分析是控制流相关的，因为我们沿着控制流计算了在每个语句之后各个变量会指向哪个对象。换句话说，除了考虑各个语句生成哪些指向信息之外，我们也考虑了每个语句“杀死了”哪些指向信息。比如，语句`b=c`；杀死了之前的事实“b指向i”并生成了新的关系“b指向c所指向的东西”。

一个控制流无关分析忽略了控制流。这么做实质上就是假设被分析程序中的各个语句可以按照任何顺序执行。它只计算一个全局性的指向映射，这个映射指明了每个变量在程序执行的各点上可能指向哪些对象。如果一个变量在程序中两个不同语句的执行之后指向两个不同的对象，我们只记录它可能指向这两个对象。换句话说，在控制流无关分析中，任何赋值都不会“杀死”任何指向关系，而是只能“生成”更多的指向关系。为了计算控制流无关分析的结果，我们不断向指针指向关系中加入各个语句的效果，直到无法找到新的关系为止。显然，缺乏控制流相关性大大弱化了分析的结果，但是这么做通常可以降低为表示分析结果而使用的数据的大小，并使得算法更快地收敛。

例12.23　回到例12.22，第1行到第3行仍然告诉我们a可以指向h；b可以指向i；c可以指向j。根据第4行和第5行，a可以指向h和i；b可以指向i和j。根据第6行，c可以指向h、i和j。这个信息又影响了第5行，接着又影响了第4行。最后，我们只得到一个没有用的结论，即任何指针可能指向任何对象。