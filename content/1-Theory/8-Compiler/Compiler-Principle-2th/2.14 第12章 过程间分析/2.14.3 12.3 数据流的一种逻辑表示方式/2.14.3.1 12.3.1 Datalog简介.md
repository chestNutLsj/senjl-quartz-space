### 12.3.1　Datalog简介

Datalog是一个使用类Prolog表示方法的语言，但是它的语义要比Prolog简单得多。首先，Datalog的元素是形如p（X1, X2, …, Xn）的原子（atom），其中：

1）p是一个断言——一个表示了一类语句的符号，比如“一个定值到达了一个基本块的开始处”。

2）X1、X2、…、Xn是变量或常量的项。我们也可以把一些简单表达式当作一个断言的参数。[^2]

一个基础原子（ground atom）是一个其参数都是常量的断言。每个基础原子表明了一个特定的事实，它的值要么是真要么是假。把一个断言表示为一个关系（或者说令该断言取真值的基础原子的表）通常比较方便。每个基础原子表示成关系的一行，或者说一个元组。这个关系的列以属性命名，对于每个属性，每个元组都有一个对应的分量。这些属性对应于用关系方式表示的基础原子的分量。在该关系中的所有基础原子的值都是真，不在此关系中的基础原子的值都为假。

例12.11　我们假设断言in（B, D）表示“定值D到达了基本块B的开始处”，并假设对于特定的流图in（b1, d1）为真且in（b2, d1）和in（b2, d2）也为真。我们也可以假设对于这个流图而言，所有其他关于in的描述都是假的。那么图12-12中的关系就表示了对应于这个流图的此断言的取值。

![599-1](../Images/image05070.jpeg)

图12-12　使用一个关系来表示一个断言的值

这个关系的属性为B和D。这个关系有三个元组，分别是（b1, d1）、（b2, d1）和（b2, d2）。

有时我们也会看到一个实际上是变量及常量之间的比较运算的原子。比如X≠Y或者X=10。在这些例子中，断言实际上是比较运算符。也就是说，我们可以把X=10看作它的断言形式：equals（X, 10）。但是比较断言和其他断言有一个最大的不同之处。一个比较断言有它的标准解释，而像in这样的普通断言的含义是由一个Datalog程序（将在下面描述）定义的。

字面值（literal）是一个原子或其否定形式。我们在一个原子前加NOT来表示否定。因此，`NOT` in（B, D）是一个断言，表示定值D不能到达基本块B的开始处。