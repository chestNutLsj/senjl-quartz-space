## 8.8　寄存器分配和指派

只涉及寄存器运算分量的指令要比那些涉及内存运算分量的指令运行得快。在现代的机器上，处理器速度要比内存速度快一个数量级以上。因此，寄存器的有效利用对生成优质代码是非常重要的。本节将给出不同的策略，用于确定在程序的每个点上，哪个值应该存放在寄存器中（寄存器分配）以及各个值应该存放在哪个寄存器中（寄存器指派）。

寄存器分配和指派的方法之一是把目标程序中的特定值分配给特定的寄存器。比如，我们可以确定把基地址指派给一组寄存器，算术计算则使用另一组寄存器，栈顶指针指派给一个固定的寄存器，等等。

这个方法的优点是使代码生成器的设计变得简单。但因为它的应用有太多限制，所以寄存器的使用效率较低：有些被占用的寄存器在相当数量的代码运行中没有被使用到，同时却不得不生成很多不必要的其他寄存器的加载和保存运算指令。虽然如此，在大多数计算环境中还是要保留一些寄存器。这些被保留的寄存器可以被用作基址寄存器、栈顶指针寄存器或其他类似的用途。其他寄存器则由代码生成器在它认为适当的时候使用。