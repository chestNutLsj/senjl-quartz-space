### 6.2.4　静态单赋值形式

静态单赋值形式（SSA）是另一种中间表示形式，它有利于实现某些类型的代码优化。SSA和三地址代码的区别主要体现在两个方面。首先，SSA中的所有赋值都是针对具有不同名字的变量的，这也是“静态单赋值”这一名字的由来。图6-13给出了分别以三地址代码形式和静态单赋值形式表示的中间程序。注意，SSA表示中对变量p和q的每次定值都以不同的下标加以区分。

![252-1](../Images/image04392.jpeg)

图6-13　三地址代码形式和SSA形式的中间程序

在一个程序中，同一个变量可能在两个不同的控制流路径中被定值。例如，下列源程序

![252-2](../Images/image04393.jpeg)

中，x在两个不同的控制流路径中被定值。如果我们对条件语句的真分支和假分支中的x使用不同的变量名，那么我们应该在赋值运算`y=x*a`中使用哪个名字？这也是SSA的第二个特别之处。SSA使用一种被称为φ函数的表示规则将`x`的两处定值合并起来：

![252-3](../Images/image04394.jpeg)

如果控制流经过这个条件语句的真分支，![252-5](../Images/image04395.jpeg)（`x1，x2`）的值为`x1`；否则，如果控制流经过假分支，![252-5](../Images/image04395.jpeg)函数的值为`x2`。也就是说，根据到达包含![252-5](../Images/image04395.jpeg)函数的赋值语句的不同控制流路径，![252-5](../Images/image04395.jpeg)函数返回不同的参数值。