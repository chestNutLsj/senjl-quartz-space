### 6.2.2　四元式表示

上面对三地址指令的描述详细说明了各类指令的组成部分，但是并没有描述这些指令在某个数据结构中的表示方法。在编译器中，这些指令可以实现为对象，或者是带有运算符字段和运算分量字段的记录。四元式、三元式和间接三元式是三种这样的描述方式。

一个四元式（quadruple）有四个字段，我们分别称为op、arg1、arg2、result。字段op包含一个运算符的内部编码。举例来说，在三地址指令x=y+z相应的四元式中，op字段中存放+，arg1中为y，arg2中为z，result中为x。下面是这个规则的一些特例：

1）形如x=`minus` y的单目运算符指令和赋值指令x=y不使用arg2。注意，对于像x=y这样的赋值语句，op是=，而对大部分其他运算而言，赋值运算符是隐含表示的。

2）像`param`这样的运算既不使用arg2，也不使用result。

3）条件或非条件转移指令将目标标号放入result字段。

例6.6　赋值语句`a=b*-c+b*-c`的三地址代码如图6-10a所示。这里我们使用特殊的`minus`运算符来表示“`-c`”中的单目减运算符“-”，以区别于“`b-c`”中的双目减运算符“-”。请注意，单目减的三地址语句中只有两个地址，复制语句`a=t5`也是如此。

图6-10b描述了实现图6-10a中三地址代码的四元式序列。

![250-1](../Images/image04389.jpeg)

图6-10　三地址代码及其四元式表示

为了提高可读性，我们在图6-10b中直接用实际标识符，比如用a、b、c来描述arg1、arg2以及result字段，而没有使用指向相应符号表条目的指针。临时名字可以像程序员定义的名字一样被加入到符号表中，也可以实现为Temp类的对象，这个Temp类有自己的方法。