### 6.4.5　6.4节的练习

练习6.4.1：向图6-19的翻译方案中加入对应于下列产生式的规则：

1）E→E1*E2

2）E→+E1（单目加）

练习6.4.2：使用图6-20中的增量式翻译方案重复练习6.4.1。

练习6.4.3：使用图6-22所示的翻译方案来翻译下列赋值语句：

![262-3](../Images/image04414.jpeg)

！练习6.4.4：修改图6-22中的翻译方案，使之适合Fortran风格的数组引用，也就是说，n维数组的引用为id［E1，E2，…，En］。

练习6.4.5：将公式（6.7）推广到多维数组上，并指出哪些值可以被存放到符号表中并用来计算偏移量。考虑下列情况：

1）一个二维数组A，按行存放。第一维的下标从l1到h1，第二维的下标从l2到h2。单个数组元素的宽度为w。

2）其他条件和1相同，但是采用按列存放方式。

！3）一个k维的数组A，按行存放，元素宽度为w，第j维的下标从lj到hj。

！4）其他条件和3相同，但是采用按列存放方式。

练习6.4.6：一个按行存放的整数数组A［i，j］的下标i的范围为1～10，下标j的范围为1～20。每个整数占4个字节。假设数组A从0字节开始存放，请给出下列元素的位置：

1）A［4，5］　2）A［10，8］　3）A［3，17］

练习6.4.7：假定A是按列存放的，重复练习6.4.6。

练习6.4.8：一个按行存放的实数型数组A［i，j，k］的下标i的范围为1～4，下标j的范围为0～4，且下标k的范围为5～10。每个实数占8个字节。假设数组A从0字节开始存放。计算下列元素的位置。

1）A［3，4，5］　2）A［1，2，7］　3）A［4，3，9］

练习6.4.9：假定A是按列存放的，重复练习6.4.8。

符号化表示的类型宽度

中间代码应该相对独立于目标机器，这样当代码生成器被替换为对应于另一台机器的代码生成器时，优化器不需要做出太大的改变。然而，正如我们刚刚描述的类型宽度计算方法所示，关于基本类型的信息被融合到了这个翻译方案中。例如，例6.12中假定每个整数数组的元素占4个字节。一些中间代码，如Pascal的P-code，让代码生成器来填写数组元素的大小，因此中间代码独立于机器的字长。只要用一个符号常量来代替翻译方案中的（作为整数类型宽度的）4，我们就可以在我们的翻译方案中做到这一点。