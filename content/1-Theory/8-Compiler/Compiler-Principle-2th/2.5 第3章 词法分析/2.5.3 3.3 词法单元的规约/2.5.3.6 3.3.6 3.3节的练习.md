### 3.3.6　3.3节的练习

练习3.3.1：对于下列各个语言，查询语言使用手册以确定：（i）形成各语言的输入字母表的字符集分别是什么（不包括那些只能出现在字符串或注释中的字符）？（ii）各语言的数字常量的词法形式是什么？（iii）各语言的标识符的词法形式是什么？

（1）C　（2）C++　（3）C#　（4）Fortran　（5）Java　（6）Lisp　（7）SQL

！练习3.3.2：试描述下列正则表达式定义的语言：

1）a（a|b）*a

2）（（∈|a）b*）*

3）（a|b）*a（a|b）（a|b）

4）a*ba*ba*ba*

！！5）（aa|bb）*（（ab|ba）（aa|bb）*（ab|ba）（aa|bb）*）*

练习3.3.3：试说明在一个长度为n的字符串中，分别有多少个

1）前缀

2）后缀

3）真前缀

！4）子串

！5）子序列

练习3.3.4：很多语言都是大小写敏感的（case sensitive），因此这些语言的关键字只能有一种写法，描述这些关键字的词素的正则表达式就很简单。但是，像SQL这样的语言是大小写不敏感的（case insensitive），一个关键字既可以大写，也可以小写，还可以大小写混用。因此，SQL中的关键字`SELECT`可以写成`select、Select`或`sElEcT`。请描述出如何用正则表达式来表示大小写不敏感的语言中的关键字。给出描述SQL语言中的关键字“select”的表达式，以说明你的思想。

！练习3.3.5：试写出下列语言的正则定义：

1）包含5个元音的所有小写字母串，这些串中的元音按顺序出现。

2）所有由按词典递增序排列的小写字母组成的串。

3）注释，即/*和*/之间的串，且串中没有不在双引号（"）中的*/。

！！4）所有不重复的数位组成的串。提示：首先尝试解决只含有少量数位（比如{0，1，2}）的数位串。

！！5）所有最多只有一个重复数位的串。

！！6）所有由偶数个a和奇数个b构成的串。

7）以非正式方式表示的国际象棋的步法的集合，如`p-k4`或`kbp×qn`。

！！8）所有由a和b组成且不含子串abb的串。

9）所有由a和b组成且不含子序列abb的串。

练习3.3.6：为下列的字符集合写出对应的字符类。

1）英文字母的前10个字母（从a～j），包括大写和小写。

2）所有小写的辅音字母的集合。

3）十六进制中的“数位”（对大于9的数位，自己决定大写或小写）。

4）可以出现在一个合法的英语句子后面的字符集（比如感叹号）。

从下面开始直到练习3.3.10（含）讨论了来自Lex的正则表达式的扩展表示方法（我们将在3.5节中讨论这个词法分析器生成工具）。这些扩展表示方法在图3-8中列出。

![094-1](../Images/image04062.jpeg)

图3-8　Lex的正则表达式

练习3.3.7：请注意这些正则表达式中的下列字符（称为运算符字符）都具有特殊的含义：

\ " . ^ $［］* +？{ } | /

如果想要使得这些特殊字符在一个串中表示它们自身，就必须取消它们的特殊含义。我们将它们放在一个长度大于等于1且加上双引号的串中就可以取消特殊含义。例如，正则表达式“**”和字符串**匹配。我们也可以在一个运算符字符前加一个反斜线，得到这个字符的字面含义。那么，正则表达式\*\*也和串**匹配。请写出一个和字符串"\匹配的正则表达式。

练习3.3.8：在Lex中，补集字符类（complemented character class）代表该字符类中列出的字符之外的所有字符。我们将^放在开头来表示一个补集字符类。除非^在该字符类内列出，否则这个字符不在被取补的字符类中。因此，`［^A-Za-z］`匹配所有不是大小写字母的字符，［^\^］匹配除^（以及换行符，因为它不在任何字符类中）之外的任何字符。试证明：对于每个带有补集字符类的正则表达式，都存在一个等价的不含补集字符类的正则表达式。

！练习3.3.9：正则表达式r{m，n}和模式r的m到n次重复出现相匹配。例如，`a{1，5}`和由1～5个a组成的串匹配。试证明：对于每一个包含这种形式的重复运算符的正则表达式，都存在一个等价的不包含重复运算符的正则表达式。

！练习3.3.10：运算符^匹配一行的最左端，$匹配一行的最右端。运算符^也被用作补集字符类的首字符，但是通过上下文总是能够确定它的含义。例如，`^［^aeiou］*`$匹配任何一个不包含小写元音字符的行。

1）你怎样判断^到底表示哪一个意思？

2）是否总是能够将一个包括^和$运算符的正则表达式替换为一个等价的不包含这些运算符的正则表达式？

！练习3.3.11：UNIX的shell命令sh在文件名表达式中使用图3-9中的运算符来描述文件名的集合。例如，文件名表达式`*.o`和所有以`.o`结束的文件名匹配；`sort1.？`和所有形如`sort1`.c的文件名匹配，其中c可以是任何字符。试问如何使用只包含并、连接和闭包运算符的正则表达式来表示`sh`文件名表达式？

![095-1](../Images/image04063.jpeg)

图3-9　shell命令`sh使用的文件名表达式`

！练习3.3.12：SQL语言支持一种不成熟的模式描述方式，其中有两个具有特殊含义的字符；下划线（_）表示任意一个字符；百分号%表示包含0个或多个字符的串。此外，程序员还可以将任意一个字符（比如e）定义为转义字符。那么，在_、%或者另一个e之前加上一个e，就使得这个字符只表示它的字面值。假设我们已经知道哪个字符是转义字符，说明如何将任意SQL模式表示为一个正则表达式。