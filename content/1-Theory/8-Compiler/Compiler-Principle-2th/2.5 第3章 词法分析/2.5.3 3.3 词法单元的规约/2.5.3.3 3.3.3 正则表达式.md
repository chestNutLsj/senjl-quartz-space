### 3.3.3　正则表达式

假设我们要描述C语言的所有合法标识符的集合。它差不多就是例3.3的第5项所定义的语言，唯一的不同是C的标识符中可以包括下划线。

在例3.3中，我们可以首先给出字母和数位集合的名字，然后使用并、连接和闭包这些运算符来描述标识符。这种处理方法非常有用。因此，人们常常使用一种称为正则表达式的表示方法来描述语言。正则表达式可以描述所有通过对某个字母表上的符号应用这些运算符而得到的语言。在这种表示法中，如果使用`letter_`来表示任一字母或下划线，用digit_来表示数位，那么可以使用如下的正则表达式来描述对应于C语言标识符的语言：

letter_（letter_｜digit）*

上式中的竖线表示并运算，括号用于把子表达式组合在一起，星号表示“零个或多个”括号中表达式的连接，将letter_和表达式的其余部分并列表示连接运算。

正则表达式可以由较小的正则表达式按照如下规则递归地构建。每个正则表达式r表示一个语言L（r），这个语言也是根据r的子表达式所表示的语言递归地定义的。下面的规则定义了某个字母表Σ上的正则表达式以及这些表达式所表示的语言。

归纳基础：如下两个规则构成了归纳基础：

1）∈是一个正则表达式，L（∈）={∈}，即该语言只包含空串。

2）如果a是Σ上的一个符号，那么a是一个正则表达式，并且L（a）={a}。也就是说，这个语言仅包含一个长度为1的符号串a。请注意，根据惯例，我们通常用斜体表示符号，粗体表示它们所对应的正则表达式。[^1]

归纳步骤：由小的正则表达式构造较大的正则表达式的步骤有四个部分。假定r和s都是正则表达式，分别表示语言L（r）和L（s），那么：

1）（r）|（s）是一个正则表达式，表示语言L（r）∪L（s）。

2）（r）（s）是一个正则表达式，表示语言L（r）L（s）。

3）（r）*是一个正则表达式，表示语言（L（r））*。

4）（r）是一个正则表达式，表示语言L（r）。最后这个规则是说在表达式的两边加上括号并不影响表达式所表示的语言。

按照上面的定义，正则表达式经常会包含一些不必要的括号。如果我们采用如下的约定，就可以丢掉一些括号：

1）一元运算符*具有最高的优先级，并且是左结合的。

2）连接具有次高的优先级，它也是左结合的。

3）|的优先级最低，并且也是左结合的。

例如，我们可以根据这个约定将（a）|（（b）*（c））改写为a|b*c。这两个表达式都表示同样的串集合，其中的元素要么是单个a，要么是由0个或多个b后面再跟一个c组成的串。

例3.4　令Σ={a，b}。

1）正则表达式a|b表示语言{a，b}。

2）正则表达式（a|b）（a|b）表示语言{aa，ab，ba，bb}，即在字母表Σ上长度为2的所有串的集合。可表示同样语言的另一个正则表达式是aa|ab|ba|bb。

3）正则表达式a*表示所有由零个或多个a组成的串的集合，即{∈，a，aa，aaa，…}。

4）正则表达式（a|b）*表示由零个或多个a或b的实例构成的串的集合，即由a和b构成的所有串的集合{∈，a，b，aa，ab，ba，bb，aaa，…}。另一个表示相同语言的正则表达式是（a*b*）*。

5）正则表达式a|a*b表示语言{a，b，ab，aab，aaab，…}，也就是串a和以b结尾的零个或多个a组成的串的集合。

可以用一个正则表达式定义的语言叫做正则集合（regular set）。如果两个正则表达式r和s表示同样的语言，则称r和s等价（equivalent），记作r=s。例如，（a|b）=（b|a）。正则表达式遵守一些代数定律，每个定律都断言两个具有不同形式的表达式等价。图3-7给出了一些对于任意正则表达式r、s和t都成立的代数定律。

![092-1](../Images/image04057.jpeg)

图3-7　正则表达式的代数定律