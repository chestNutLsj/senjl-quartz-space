   

# 第3章　词法分析

本章我们主要讨论如何构建一个词法分析器。如果要手动地实现词法分析器，首先建立起每个词法单元的词法结构图或其他描述会有所帮助。然后，我们可以编写代码来识别输入中出现的每个词素，并返回识别到的词法单元的有关信息。

我们也可以通过如下方式自动生成一个词法分析器：向一个词法分析器生成工具（lexical-analyzer generator）描述出词素的模式，然后将这些模式编译为具有词法分析器功能的代码。这种方法使得修改词法分析器的工作变得更加简单，因为我们只需改写那些受到影响的模式，无需改写整个程序。这种方法还加快了词法分析器的实现速度，因为程序员只需要在很高的模式层次上描述软件，就可以依赖生成工具来生成详细的代码。我们将在3.5节中介绍一个名为Lex的词法分析器生成工具（它的一个最新的变体称为Flex）。

在介绍词法分析器生成工具之前，我们先介绍正则表达式。正则表达式是一种可以很方便地描述词素模式的方法。我们将介绍如何对正则表达式进行转换：首先转换为不确定有穷自动机，然后再转换为确定有穷自动机。后两种表示方法可以作为一个“驱动程序”的输入。这个驱动程序就是一段模拟这些自动机的代码，它使用这些自动机来确定下一个词法单元。这个驱动程序以及对自动机的规约形成了词法分析器的核心部分。