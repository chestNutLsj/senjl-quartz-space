### 3.5.1　Lex的使用

Lex的使用方法如图3-22所示。首先，用Lex语言写出一个输入文件，描述将要生成的词法分析器。在图中这个输入文件称为`lex.1。`然后，Lex编译器将`lex.1转换成`C语言程序，存放该程序的文件名总是`lex.yy.c`。最后，文件lex.yy.c总是被C编译器编译为一个名为`a.out`的文件。C编译器的输出就是一个读取输入字符流并生成词法单元流的可运行的词法分析器。

编译后的C程序，在图3-22中被称为`a.out` ，通常是一个被语法分析器调用的子例程，这个子例程返回一个整数值，即可能出现的某个词法单元名的编码。而词法单元的属性值，不管它是一个数字编码，还是一个指向符号表的指针，或者什么都没有，都保存在全局变量`yylval`中[^2]。这个变量由词法分析器和语法分析器共享。这么做可以同时返回一个词法单元名字和一个属性值。

![104-1](../Images/image04080.jpeg)

图3-22　用Lex创建一个词法分析器