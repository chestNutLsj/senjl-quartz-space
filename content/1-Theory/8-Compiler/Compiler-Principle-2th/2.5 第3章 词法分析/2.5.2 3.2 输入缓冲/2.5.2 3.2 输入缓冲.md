## 3.2　输入缓冲

在讨论如何识别输入流中的词素之前，我们首先讨论几种可以加快源程序读入速度的方法。源程序读入虽然简单，却很重要。由于我们常常需要查看一个词素之后的若干字符才能够确定是否找到了正确的词素，因此这个任务变得有些困难。在3.1节的“识别词法单元时的棘手问题”中给出了一个极端的例子。但是在实践中，很多情况下我们的确需要至少向前看一个字符。比如，我们只有读取到一个非字母或数字的字符之后才能确定我们已经到达一个标识符的末尾，因此这个字符不是id的词素的一部分。在C语言中，像-、=或<这样的单字符运算符也有可能是->、==或<=这样的双字符运算符的开始字符。因此，我们将介绍一种双缓冲区方案，这种方案能够安全地处理向前看多个符号的问题。然后我们将考虑一种改进方法。这种方法使用“哨兵标记”来节约用于检查缓冲区末端的时间。