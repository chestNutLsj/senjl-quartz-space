### 3.8.3　词法分析器使用的DFA

另一种体系结构和Lex的输出相似，它使用算法3.20中的子集构造法将表示所有模式的NFA转换为等价的DFA。在DFA的每个状态中，如果该状态包含一个或多个NFA的接受状态，那么就要确定哪些模式的接受状态出现在此DFA状态中，并找出第一个这样的模式。然后将该模式作为这个DFA状态的输出。

例3.28　使用子集构造法可以根据图3-52中的NFA构造得到一个DFA。图3-54显示了这个DFA的一个转换图。图中的接受状态都用该状态所标识的模式作为标号。例如，状态{6，8}有两个接受状态，分别对应于模式abb和a*b+。由于前一个模式先被列出，因此该模式就是状态{6，8}所关联的模式。

![122-2](../Images/image04122.jpeg)

图3-54　处理模式a、abb和a*b+的DFA的转换图

在词法分析器中，我们使用DFA的方法与使用NFA的方法很相似。我们模拟这个DFA的运行，直到在某一点上没有后续状态为止（严格地说应该是下一个状态为Ø，即对应于空的NFA状态集合的死状态）。此时，我们回头查找我们进入过的状态序列，一旦找到接受状态就执行与该状态对应的模式相关联的动作。

例3.29　假设图3-54中的DFA的输入为abba。处理输入时进入过的状态序列为0137、247、58、68。在读入最后一个a时，没有离开状态68的相应转换。因此，我们从后向前考察这个状态序列。在这个例子中，68本身就是一个接受状态，对应于模式p2=abb。