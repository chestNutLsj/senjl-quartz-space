### 9.6.2　深度优先排序

如2.3.4节中所介绍的，对一个流图的深度优先搜索（depth-first search）逐一访问图的所有结点。搜索过程从入口结点开始，并首先访问离入口结点最远的结点。一个深度优先过程中的搜索路线形成了一个深度优先生成树（Depth-First Spanning Tree，DFST）。2.3.4节介绍过，一个先序遍历过程首先访问一个结点，然后从左到右递归地访问该结点的子结点。另外，一个后序遍历过程首先递归地从左到右访问一个结点的子结点，然后访问该结点本身。

还有一种排序方式对于流图分析很重要：深度优先排序（depth-first ordering）。它的顺序正好和后序遍历的顺序相反。也就是说，在深度优先排序中，我们首先访问一个结点，然后遍历该结点的最右子结点，再遍历这个子结点左边的子结点，依此类推。但是在我们为流图构造生成树之前，我们可以选择把一个结点的哪个后继作为它在树中的最右子结点，再选择哪个后继是下一个子结点，等等。在我们给出深度优先排序的算法之前，首先考虑一个例子。

例9.40　图9-38中流图的一个可能的深度优先表示法如图9-42所示。实线边形成了这棵树，虚线边是流图中其他的边。这棵树的深度优先遍历是1→3→4→6→7→8→10，然后回到8，再到9。我们再一次回到8，再回到7、6和4，然后前进到5。我们从5回到4，然后回到3和1。我们从1前进到2，然后从2回到1。这样我们就遍历了整棵树。

因此，这次遍历的前序序列是：

1，3，4，6，7，8，10，9，5，2

图9-42中树的后序遍历顺序是：

10，9，8，7，6，5，4，3，2，1

深度优先排序的顺序和后序遍历序列相反，即

1，2，3，4，5，6，7，8，9，10

现在我们给出一个算法来寻找一个流图的深度优先生成树和相应的深度优先排序。正是这个算法从图9-38的流图中找到了图9-42中的DFST。

![437-1](../Images/image04723.jpeg)

图9-42　图9-38中流图的一个深度优化表示

算法9.41　深度优先生成树和深度优先排序。

输入：一个流图G。

输出：G的一个DFST树T和G中结点的一个深度优先排序。

方法：我们使用图9-43的递归过程search（n）。这个算法首先把G的所有结点初始化为“unvisited”，然后调用search（n0），其中n0是入口结点。当它调用search（n）的时候，首先把n标记为“visited”，以免把n再次加入到树中。它使用c作为计数器，从G的结点总数一直倒计数到1。在算法执行的时候把c的值赋给结点n的深度优先编号dfn［n］。边的集合T形成了G的深度优先生成树。

![437-2](../Images/image04724.jpeg)

图9-43　深度优先搜索算法

例9.42　对于图9-42中的流图，算法9.41把c设置为10，并调用search（1）开始搜索。其余的执行序列显示在图9-44中。

![437-3](../Images/image04725.jpeg)

图9-44　算法9.41在图9-42的流图上执行的过程