### 9.4.5　常量传播框架的不可分配性

上面定义的常量传播框架是单调的，但不是可分配的。也就是说，迭代解MFP是安全的，但是可能比MOP解小。可以用一个例子来证明这个框架不是可分配的。

例9.26　在图9-27的程序中，x和y在基本块B1中被分别设置为2和3，而在基本块B2中被分别设置为3和2。我们知道，不管按照哪条路径执行，在基本块B3的结尾处z的值都是5。但是，上面的迭代算法没有发现这个事实。相反地，它在B3的入口处应用交汇运算，并把x和y的值都设置为NAC。因为两个NAC相加的结果还是NAC，算法9.25在程序的出口处产生的输出是z=NAC。这个结果是安全的，但是不够精确。算法9.25不够精确的原因是它没有跟踪x和y之间的相关性：当x是2时y必然是3，而当x是3时y必然是2。可以使用一个更加复杂的框架来跟踪包含程序变量的表达式之间的相等关系，但是这个方法的代价要高得多。这个方法将在练习9.4.2中讨论。

![422-1](../Images/image04701.jpeg)

图9-27　一个说明常量传播框架不可分配的例子

从理论上讲，我们可以把精确度的丧失归因于常量传播框架的不可分配性。令f1、f2、f3分别是代表基本块B1、B2、B3的传递函数。如图9-28所示，

![422-2](../Images/image04702.jpeg)

图9-28　不可分配的传递函数的例子

f3（f1（m0）∧f2（m0））<f3（f1（m0））∧f3（f2（m0））

体现了这个框架的不可分配性。