   

### 9.4.6　对算法结果的解释

在迭代算法中使用值UNDEF有两个目的：初始化ENTRY结点，以及在迭代之前对程序内部的点进行初始化。UNDEF在这两种情况下的含义略有不同。第一种情况是说变量在程序开始执行的时候是没有定值的；第二种情况是表示因为在迭代过程开始的时候缺乏信息，因此我们把解近似估算为顶元素UNDEF。在迭代过程结束后，在ENTRY结点的出口处各个变量的值仍然是UNDEF，因为OUT［ENTRY］不会改变。

UNDEF值也可能出现在某些其他的程序点上。它们的出现意味着在到达该程序点的所有路径中尚未发现任何对该变量的定值。请注意，根据我们定义交汇运算的方式，只要有一个对该变量定值的路径到达该程序点，变量的值就不是UNDEF了。如果到达一个程序点的所有定值都有同样的常量值，那么即使该变量可能在某些路径上没有被定值，它仍然会被当作是常量。

如果假设被分析的程序是正确的，我们的算法就可以发现比不做这个假设时更多的常量。也就是说，我们的算法会为可能未定值的变量选择适当的值，以便程序能够更加高效地执行。在大多数程序设计语言中，这种改变是合法的，因为在这些语言中未定值的变量可以取任何值。如果语言的语义要求所有未定值的变量取某个特定的值，那么我们就必须相应地改变在这个数据流问题中使用的公式。如果我们对寻找程序中可能未定值的变量感兴趣，就可以用公式刻画出一个不同的数据流分析问题，以提供相应的结果（见练习9.4.1）。

例9.27　在图9-29中，变量x在基本块B2和B3的出口处的值分别为10和UNDEF。因为UNDEF∧10=10，x在基本块B4的入口点的值是10。因此可以在使用x的基本块B5中把x替换为常量10，从而对B5进行优化。如果被执行的路径是B1→B3→B4→B5，那么到达基本块B5时x的值尚未定值。因此把对x的使用替换为10看起来是不正确的。

![422-3](../Images/image04703.jpeg)

图9-29　UNDEF和一个常量值的交汇运算值

但是如果断言Q′为真时断言Q不可能为假，那么这个执行路径实际上不可能出现。虽然程序员可能知道这个事实，但判定这个事实已经超出了任何数据流分析技术的能力。因此，如果我们假设程序是正确的，并且所有变量在被使用之前都已经定值，那么x在基本块B5开始处的值只能是10。如果程序一开始就是不正确的，那么选择10作为x的值不可能比允许x取随机值的效果更糟。