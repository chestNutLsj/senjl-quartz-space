### 9.7.1　区域

在基于区域的分析中，程序被看作是一个区域（region）的层次结构。区域（粗略地讲）就是一个流图中只具有单个入口结点的部分。我们会发现，把代码看作区域层次结构的概念是很直观的，因为一个基于块结构的过程很自然地被组织成一个区域层次结构。在一个块结构的程序中，每个语句就是一个区域，因为控制流只能从一个语句的开头进入。每个语句嵌套层次对应于区域层次结构中的一层。

正式地讲，流图的一个区域是满足如下条件的一个结点集N和边集E：

1）在N中有一个支配N中所有结点的头结点h。

2）如果某个结点m能够不经过h到达N中的n，那么m也在N中。

3）E是所有位于N中的任意两个结点n1和n2之间的控制流边的集合。有些进入h的边（可能）不在其中。

例9.50　显然，一个自然循环就是一个区域，但是一个区域不一定包含一条回边，也不需要包含任何环。比如，图9-47中的结点B1和B2以及边B1→B2形成了一个区域；结点B1、B2、B3以及边B1→B2、B2→B3和B1→B3也形成一个区域。

![444-1](../Images/image04729.jpeg)

图9-47　区域的例子

但是由结点B2、B3以及边B2→B3组成的子图不是一个区域，因为控制流可能从结点B2或B3进入这个子图。更准确地说，B2和B3都不支配另一个结点，因此违反了区域定义中的条件（1）。即使我们“选择”某个结点（比如B2）作为“头结点”，我们还是会违反条件（2），因为我们可以不经过B2就从B1到达B3，而B1不在这个“区域”中。