### 10.4.7　和动态调度器的交互

一个动态调度器的优势是它可以根据运行时刻的情况产生新的调度方案，而不必在运行之前对所有可能的调度进行编码。如果目标机器有一个动态调度器，那么静态调度器的主要功能是保证尽早获得高延时指令，使得动态调度器可以尽早发出这些指令。

高速缓存脱靶是一类不可预测的事件，它们可能使得程序的性能有很大的不同。如果可以使用数据预取指令，那么静态调度器可以较早地放置这些预取指令以使得在需要相应数据时，数据已经在高速缓存之中。静态调度器通过这种方式有效地帮助动态调度器。如果没有预取指令可用，编译器可以估算一下哪些运算可能会发生高速缓存脱靶，并试图早一点发出这些运算指令。

如果在目标机器上没有动态调度机制，静态调度器必须保守地处理调度问题，把每对具有数据依赖关系的运算分开，使它们之间的间隔不小于最小延时。但是，如果有动态调度器可用，编译器只需要把具有数据依赖关系的运算指令按照正确的顺序排列，以保证程序的正确性。为了得到最佳性能，编译器应该给较有可能发生的依赖赋予较长的延时，给不大可能发生的依赖赋予较短的延时。

分支的错误预测是性能下降的重要原因之一。因为错误预测会带来较长的时间损失，较少执行路径上的指令仍然会对整个执行时间产生较大的影响。所以，应该给这类指令赋予较高的优先级，以便降低错误预测的代价。