### 10.4.4　更新数据依赖关系

如下面的例10.10所示，代码移动可能会改变运算之间的数据依赖关系。因此在每次代码移动之后都必须更新数据依赖关系。

例10.10　对于图10-14中显示的流图，对x的两个赋值之一可以被向上移动到顶部的基本块，因为这样的转换保持了原程序中的所有依赖关系。但是，一但我们把其中一个赋值语句上移，就不能再移动另一个。更明确地说，我们看到在代码移动之前顶部的基本块的出口处x是不活跃的，但是在移动之后就变得活跃了。如果一个变量在一个程序点上活跃，那么我们不能把对该变量的投机性定值移动到该程序点的前面。

![480-2](../Images/image04816.jpeg)

图10-14　说明因为代码移动而改变数据依赖关系的例子