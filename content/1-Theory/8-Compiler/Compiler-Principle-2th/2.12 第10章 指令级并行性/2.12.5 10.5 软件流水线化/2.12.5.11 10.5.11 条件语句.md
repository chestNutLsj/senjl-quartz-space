### 10.5.11　条件语句

如果可以使用带断言的指令，我们可以把控制依赖的指令转换成为带断言的指令。带断言的指令可以和其他指令一样进行软件流水线化处理。但是，如果在循环体内有很多依赖于数据的控制流，那么就更加适合使用10.4节中的算法进行调度。

如果一个机器没有带断言的指令，那么可以使用下面描述的层次结构归约（hierarchical reduction）技术来处理少量的依赖于数据的控制流。和算法10.11类似，在层次结构归约中，对一个循环控制结构的调度是从嵌套在最内层的结构开始，以从内到外的顺序进行调度的。当每个结构被调度时，整个结构被归约为一个结点。这个结点代表了它的所有组成部分和程序的其他部分之间的调度约束。然后，这个结点可以当作它外围的控制结构中的单个结点进行调度。当整个程序被归约为单个结点的时候，调度过程就结束了。

当处理一个带有“then”分支和“else”分支的条件语句时，我们首先独立地对各个分支进行调度。然后：

1）整个条件语句的约束被保守地设定为来自两个分支的约束的并集。

2）它的资源使用情况是各个分支所用资源的最大值。

3）它的先后次序约束是各个分支中此类约束的并集。通过假设两个分支都被执行就可以求得这个约束集合。

然后，这个结点就可以和其他结点一样进行调度。需要生成分别对应于两个分支的两组代码。任何被安排与这个条件语句并行执行的代码都需要在这两个分支中分别进行复制。如果多个条件语句相互交叠，那么对并行执行的每个分支组合都要生成单独的代码。