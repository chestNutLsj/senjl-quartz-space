### 11.5.1　数据复用的类型

我们首先用例11.20来说明不同种类的数据复用。在下面的内容中，我们需要区分作为程序中的一个指令的访问（比如x=Z［i,j］）和我们执行循环嵌套结构时指令的多次执行。为了强调它们之间的区别，我们将把访问指令本身称为静态访问（static access），而当我们执行该循环嵌套结构时该语句的多次迭代称为动态访问（dynamic access）。

数据复用可以分为自复用和组复用两种。如果复用同样数据的多个迭代源于同一个静态访问，我们就把这样的复用称为自复用；如果它们源于不同的静态访问，那么我们称这个复用为组复用。如果一个复用指向完全相同的位置，那么它就是时间复用；如果指向同一个高速缓存线，那么它就是空间复用。

例11.20　考虑下面的循环嵌套结构：

![525-1](../Images/image04902.jpeg)

数组访问Z［j］、Z［j+1］和Z［j+2］都具有自空间复用性，因为同一个访问的连续迭代指向连续的数组元素。我们假定连续元素很可能存放在同一个高速缓存线中。另外，这些访问都具有自时间复用性，因为在外层循环的每次迭代中，同一个元素被多次使用。再者，它们都具有同样的系数矩阵，因此具有组复用性。在不同的访问之间具有组复用性，而且既是时间性复用，又是空间性复用。当这些复用都可以利用时，虽然在代码中有4n2次访问，我们只需要把大约n/c个高速缓存线加载到高速缓存中即可，其中c是一个高速缓存线中的内存字的数量。因为具有自空间复用性，我们从4n2中消除了一个因子n；因为存在空间局部性，我们又把加载次数降低了c倍；最后因为组复用的原因又降低了4倍。

下面我们说明如何使用线性代数从仿射数组访问中抽取复用信息。我们感兴趣的不仅仅是找出有多大的提高性能的潜力，而且要找出哪些迭代在复用数据，以便把这些迭代移近从而利用这些复用。