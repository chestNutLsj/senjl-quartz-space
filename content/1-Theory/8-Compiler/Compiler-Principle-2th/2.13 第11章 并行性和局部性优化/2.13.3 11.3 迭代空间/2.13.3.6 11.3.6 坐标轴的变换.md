### 11.3.6　坐标轴的变换

请注意，上面讨论的对迭代空间进行水平扫描或垂直扫描只是两种最常见的访问迭代空间的方法。还有很多其他的可行方法，比如，我们可以按照逐条斜线的方式来扫描例11.6中的迭代空间。下面的例11.15就讨论这种扫描方法。所示。每条斜线上的点的坐标j和i之间的差值是一个常量。开始的时候这个差值是0，而结束的时候是7。因此，我们定义一个新的变量k=j-i，并按照针对k，j的词典顺序来扫描上面的迭代空间。在不等式中用j-k替代i，我们得到：

例11.15　我们可以按照逐条斜线的方式来扫描图11-11中的迭代空间，使用的顺序如图11-16

![520-2](../Images/image04889.jpeg)

图11-16　图11-11的迭代空间的斜向排序

0≤j-k≤5

j-k≤j≤7

要为上面描述的顺序建立循环界限，可以对上面的不等式集合按照变量顺序k、j应用算法11.13，得到

Lj:k

Uj:5+k,7

Lk:0

Uk:7

根据这些不等式，我们可以生成下列代码。在访问数组的时候，i被替换为j-k。

![520-3](../Images/image04890.jpeg)

一般来说，我们可以通过创建新的循环下标变量并定义这些变量的顺序，从而改变一个多面体的坐标轴。这些新的循环下标变量表示了原来变量的仿射组合。这个问题的难点在于如何选择适当的坐标轴，使得在满足数据依赖关系的同时达到并行性和局部性目标。我们将从11.7节开始讨论这个问题。在这里，我们的结果表明一旦选择好坐标轴，就可以像例11.15所示那样直接生成想要的代码。

还有很多遍历-迭代的顺序不能使用这个技术处理。比如，我们可能希望首先访问一个迭代空间中的奇数行，然后再访问其偶数行。或者我们可能想从迭代空间的中间开始然后逐渐到达边缘地带。但是，对于具有仿射访问函数的应用程序而言，这里描述的技术覆盖了人们期望的大部分迭代排序。