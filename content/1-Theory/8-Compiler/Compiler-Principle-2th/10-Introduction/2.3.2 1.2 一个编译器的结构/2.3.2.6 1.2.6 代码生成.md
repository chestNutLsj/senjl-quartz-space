### 1.2.6　代码生成

代码生成器以源程序的中间表示形式作为输入，并把它映射到目标语言。如果目标语言是机器代码，那么就必须为程序使用的每个变量选择寄存器或内存位置。然后，中间指令被翻译成为能够完成相同任务的机器指令序列。代码生成的一个至关重要的方面是合理分配寄存器以存放变量的值。

比如，使用寄存器`R1`和`R2`，（1.4）中的中间代码可以被翻译成为如下的机器代码：

![021-2](../Images/image03956.jpeg)

每个指令的第一个运算分量指定了一个目标地址。各个指令中的`F`告诉我们它处理的是浮点数。代码（1.5）把地址`id3`中的内容加载到寄存器`R2`中，然后将其与浮点常数60.0相乘。井号“#”表示60.0应该作为一个立即数处理。第三个指令把`id2`移动到寄存器`R1`中，而第四个指令把前面计算得到并存放在`R2`中的值加到`R1`上。最后，在寄存器`R1`中的值被存放到id1的地址中去。这样，这些代码正确地实现了赋值语句（1.1）。第8章将讨论代码生成。

上面对代码生成的讨论忽略了对源程序中的标识符进行存储分配的重要问题。我们将在第7章中看到，运行时刻的存储组织方法依赖于被编译的语言。编译器在中间代码生成或代码生成阶段做出有关存储分配的决定。