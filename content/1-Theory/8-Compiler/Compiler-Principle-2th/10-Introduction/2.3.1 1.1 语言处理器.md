## 1.1　语言处理器

简单地说，一个编译器就是一个程序，它可以阅读以某一种语言（源语言）编写的程序，并把该程序翻译成为一个等价的、用另一种语言（目标语言）编写的程序，参见图1-1。编译器的重要任务之一是报告它在翻译过程中发现的源程序中的错误。

![016-1](../Images/image03945.jpeg)

图1-1　一个编译器

如果目标程序是一个可执行的机器语言程序，那么它就可以被用户调用，处理输入并产生输出。参见图1-2。

![016-2](../Images/image03946.jpeg)

图1-2　运行目标程序

解释器（interpreter）是另一种常见的语言处理器。它并不通过翻译的方式生成目标程序。从用户的角度看，解释器直接利用用户提供的输入执行源程序中指定的操作。参见图1-3。

![016-3](../Images/image03947.jpeg)

图1-3　一个解释器

在把用户输入映射成为输出的过程中，由一个编译器产生的机器语言目标程序通常比一个解释器快很多。然而，解释器的错误诊断效果通常比编译器更好，因为它逐个语句地执行源程序。

例1.1　Java语言处理器结合了编译和解释过程，如图1-4所示。一个Java源程序首先被编译成一个称为字节码（bytecode）的中间表示形式。然后由一个虚拟机对得到的字节码加以解释执行。这样安排的好处之一是在一台机器上编译得到的字节码可以在另一台机器上解释执行。通过网络就可以完成机器之间的迁移。

![017-1](../Images/image03948.jpeg)

图1-4　一个混合编译器

为了更快地完成输入到输出的处理，有些被称为即时（just in time）编译器的Java编译器在运行中间程序处理输入的前一刻首先把字节码翻译成为机器语言，然后再执行程序。

如图1-5所示，除了编译器之外，创建一个可执行的目标程序还需要一些其他程序。一个源程序可能被分割成为多个模块，并存放于独立的文件中。把源程序聚合在一起的任务有时会由一个被称为预处理器（preprocessor）的程序独立完成。预处理器还负责把那些称为宏的缩写形式转换为源语言的语句。

![017-2](../Images/image03949.jpeg)

图1-5　一个语言处理系统

然后，将经过预处理的源程序作为输入传递给一个编译器。编译器可能产生一个汇编语言程序作为其输出，因为汇编语言比较容易输出和调试。接着，这个汇编语言程序由称为汇编器（assembler）的程序进行处理，并生成可重定位的机器代码。

大型程序经常被分成多个部分进行编译，因此，可重定位的机器代码有必要和其他可重定位的目标文件以及库文件连接到一起，形成真正在机器上运行的代码。一个文件中的代码可能指向另一个文件中的位置，而链接器（linker）能够解决外部内存地址的问题。最后，加载器（loader）把所有的可执行目标文件放到内存中执行。

#### 1.1节的练习

练习1.1.1：编译器和解释器之间的区别是什么？

练习1.1.2：编译器相对于解释器的优点是什么？解释器相对于编译器的优点是什么？

练习1.1.3：在一个语言处理系统中，编译器产生汇编语言而不是机器语言的好处是什么？

练习1.1.4：把一种高级语言翻译成为另一种高级语言的编译器称为源到源（source-to-source）的翻译器。编译器使用C语言作为目标语言有什么好处？

练习1.1.5：描述一下汇编器所要完成的一些任务。