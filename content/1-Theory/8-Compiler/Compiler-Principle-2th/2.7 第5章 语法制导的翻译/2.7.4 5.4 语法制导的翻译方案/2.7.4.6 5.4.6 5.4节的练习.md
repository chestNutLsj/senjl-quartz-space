### 5.4.6　5.4节的练习

练习5.4.1：我们在5.4.2节中提到可能根据语法分析栈中的LR状态来推导出这个状态表示了什么文法符号。我们如何推导出这个信息？

练习5.4.2：改写下面的SDT：

![231-1](../Images/image04354.jpeg)

使得基础文法变成非左递归的。这里，a、b、c和d是语义动作，0和1是终结符号。

！练习5.4.3：下面的SDT计算了一个由0和1组成的串的值。它把输入的符号串当作按照正二进制数来解释。

![231-2](../Images/image04355.jpeg)

改写这个SDT，使得基础文法不再是左递归的，但仍然可以计算出整个输入串的相同的B.val的值。

！练习5.4.4：为下面的产生式写出一个和例5.10类似的L属性SDD。这里的每个产生式表示一个常见的C语言中那样的控制流结构。你可能需要生成一个三地址语句来跳转到某个标号L，此时你可以生成语句goto L。

![231-3](../Images/image04356.jpeg)

请注意，列表中的任何语句都可能包含一条从它的内部跳转到下一个语句的跳转指令，因此简单地为各个语句按顺序生成代码是不够的。

练习5.4.5：按照例5.19的方法，把在练习5.4.4中得到的各个SDD转换成一个SDT。

练习5.4.6：修改图5-25中的SDD，使它包含一个综合属性B.le，即一个方框的长度。两个方框并列后得到的方框的长度是这两个方框的长度和。然后把你的新规则加入到图5-26中SDT的合适位置上。

练习5.4.7：修改图5-25中的SDD，使得它包含上标，用方框之间的运算符sup表示。如果方框B2是方框B1的一个上标，那么将B2的基线放在B1的基线上方，两条基线的距离是0.6乘以B1的大小。把新的产生式和规则加入到图5-26的SDT中去。