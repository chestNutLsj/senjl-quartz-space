   

# 第5章　语法制导的翻译

本章继续2.3节的主题：使用上下文无关文法来引导对语言的翻译。本章讨论的翻译技术将在第6章中用于类型检查和中间代码生成。这些技术也可以用于实现那些完成特殊任务的小型语言。本章包含了一个有关排版的例子。

如2.3.2节所讨论的，我们把一些属性附加到代表语言构造的文法符号上，从而把信息和一个语言构造联系起来。语法制导定义通过与文法产生式相关的语义规则来描述属性的值。比如，一个从中缀表达式到后缀表达式的翻译器可能包含如下产生式和规则：

![209-1](../Images/image04299.jpeg)

这个产生式有两个非终结符号E和T，E1的下标用于区分E在产生式体中的出现和E在产生式头部的出现。E和T都有一个字符串类型的属性code。上面的语义规则指明字符串E.code是通过将E1.code、T.code和字符+连接起来而得到的。虽然这个规则明确指出对E的翻译结果是根据E1、T的翻译结果和“+”构造得到的，但直接通过字符串操作来实现这个翻译过程是很低效的。

根据2.3.5节的介绍可知，语法制导的翻译方案在产生式体中嵌入了称为语义动作的程序片段。比如

![209-2](../Images/image04300.jpeg)

按照惯例，语义动作放在花括号之内。（对于作为文法符号出现的花括号，我们将用单引号把它们括起来，比如‘{’和‘}’。）一个语义动作在产生式体中的位置决定了这个动作的执行顺序。在产生式（5.2）中，语义动作出现在所有文法符号之后。一般情况下，语义动作可以出现在产生式体中的任何位置。

对于这两种标记方法，语法制导定义更加易读，因此更适合作为对翻译的规约。而翻译方案更加高效，因此更适合用于翻译的实现。

最通用的完成语法制导翻译的方法是先构造一棵语法分析树，然后通过访问这棵树的各个结点来计算结点的属性值。在很多情况下，翻译可以在扫描分析过程中完成，不需要构造出明确的语法分析树。因此，我们将研究一类称为“L属性翻译”（L代表从左到右）的语法制导翻译方案，这一类方案实际上包含了所有可以在语法分析过程中完成的翻译方案。我们还将研究一个较小的类别，称为“S属性翻译方案”（S代表综合），这类方案可以很容易地和自底向上语法分析过程联系起来。