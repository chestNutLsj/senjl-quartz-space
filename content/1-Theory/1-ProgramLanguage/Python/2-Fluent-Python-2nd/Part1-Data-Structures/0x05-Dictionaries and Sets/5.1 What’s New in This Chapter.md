# What’s New in This Chapter

Most changes in this second edition cover new features related to mapping types:

- [“Modern dict Syntax”](#modern_dict_syntax_sec) covers enhanced unpacking syntax and different ways of merging mappings—including the `|` and `|=` operators supported by `dicts` since Python 3.9.
    
- [“Pattern Matching with Mappings”](#pattern_matching_mappings_sec) illustrates handling mappings with `match/case`, since Python 3.10.
    
- [“collections.OrderedDict”](#ordereddict_sec) now focuses on the small but still relevant differences between `dict` and `OrderedDict`—considering that `dict` keeps the key insertion order since Python 3.6.
    
- New sections on the view objects returned by `dict.keys`, `dict.items`, and `dict.values`: [“Dictionary Views”](#dictionary_views_sec) and [“Set Operations on dict Views”](#set_ops_dict_views_sec).
    

The underlying implementation of `dict` and `set` still relies on hash tables, but the `dict` code has two important optimizations that save memory and preserve the insertion order of the keys in `dict`. [“Practical Consequences of How dict Works”](#consequences_dict_internals) and [“Practical Consequences of How Sets Work”](#consequences_set_sec) summarize what you need to know to use them well.

###### Note

After adding more than 200 pages in this second edition, I moved the optional section [“Internals of sets and dicts”](https://fpy.li/hashint) to the [_fluentpython.com_](http://fluentpython.com) companion website. The updated and expanded [18-page post](https://fpy.li/hashint) includes explanations and diagrams about:

- The hash table algorithm and data structures, starting with its use in `set`, which is simpler to understand.
    
- The memory optimization that preserves key insertion order in `dict` instances (since Python 3.6).
    
- The key-sharing layout for dictionaries holding instance attributes—the `__dict__` of user-defined objects (optimization implemented in Python 3.3).