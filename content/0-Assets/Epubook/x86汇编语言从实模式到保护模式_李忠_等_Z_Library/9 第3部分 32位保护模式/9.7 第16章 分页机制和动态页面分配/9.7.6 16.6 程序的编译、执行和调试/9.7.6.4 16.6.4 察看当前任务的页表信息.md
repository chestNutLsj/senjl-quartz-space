### 16.6.4　察看当前任务的页表信息

可以察看当前任务的页表，显示线性地址和物理地址（页）的全部映射关系。要做到这一点，可以使用Bochs 的调试命令“info tab”。如图16-31 所示，这是在本章中初次进入分页模式后，页表的信息。

如图中所示，虚拟内存空间的低端1MB，即线性地址0x00000000～0x000FFFFF，对应着物理地址0x00000000～0x000FFFFF。这是可以理解的，因为在初次进入分页模式时，我们需要建立这低端1MB 内存空间的一一映射，使线性地址和物理地址相同。

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00718.jpeg)

图16-31　初次进入分页模式后的页表信息

为了用线性地址来修改页表的内容，我们把页表当成普通的页，把页目录表当成页表来用。在这种情况下，页表的线性首地址是0xFFC00000。因此，0xFFC00000～0xFFC00FFF 这段4KB的线性地址区间对应的是页表的实际物理地址0x00021000～0x00021FFF。

为了用线性地址访问和修改页目录表自己，页目录表的最后一个目录项，登记的是页目录表自己的物理地址。因此，页目录表的线性地址是0xFFFFF000。即，0xFFFFF000～0xFFFFFFFF 这段4KB 线性地址区间对应着实际的物理地址区间0x00020000～0x00020FFF。

在本章中，一旦通过单步执行，进入用户程序执行后，就可以察看用户任务的页表信息。如图16-32 所示，用户程序的页表信息比较庞大，但非常清楚地显示了整个内存空间的映射关系，特别是全局空间（内核）和局部空间是如何映射的。

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00719.jpeg)

图16-32　本章用户任务的页表信息

现在，请你根据本章中用户程序的结构，结合Bochs 所显示的页表信息，逐一解释这些对应关系的含义。