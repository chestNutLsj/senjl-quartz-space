   

# 第11章　进入保护模式

一般来说，操作系统负责整个计算机软、硬件的管理，它做任何事情都是可以的。但是，用户程序却应当有所限制，只允许它访问属于自己的数据，即使是转移，也只允许在自己的各个代码段之间进行。

问题在于，在实模式下，用户程序对内存的访问非常自由，没有任何限制，随随便便就可以修改任何一个内存单元。比如以下代码片断，它先保存当前的数据段地址，然后修改别人的数据，最后再回到原先的数据段：

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00416.jpeg)

很显然，即使物理内存单元0x80005 不属于当前程序，它照样可以切换到那里，并随意修改其中的内容。最恐怖的是，如果那个地方是操作系统或其他用户程序的“地盘”，那将带来不可预料的后果。通过这个例子，你就知道为什么很多人能通过修改内存中的数据来提升游戏人物的法力和生命值，并获得各种道具。

在多用户、多任务时代，内存中会有多个用户（应用）程序在同时运行。为了使它们彼此隔离，防止因某个程序的编写错误或者崩溃而影响到操作系统和其他用户程序，使用保护模式是非常有必要的。

本章学习目标：

1．了解x86 处理器的保护模式需要先定义全局描述符表GDT，认识段描述符的各个组成部分以及它们的含义和作用。

2．认识32 位处理器的全局描述符表寄存器GDTR、段寄存器（由段选择器和描述符高速缓存器组成）、控制寄存器CR0 和段选择子。

3．了解进入32 位保护模式的方法和步骤。

4．学习保护模式下的一些程序调试技术，如察看全局描述符表GDT、段寄存器和控制寄存器等。

5．学习一条x86 处理器的新指令lgdt。