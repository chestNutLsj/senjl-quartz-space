### 4.2.2　下载和安装Oracle VM VirtualBox

主流的虚拟机软件包括VMWare、Virtual PC 和VirtualBox 等，但只有VirtualBox 是开源和免费的。

要使用VirtualBox，首先必须从网上下载并安装它。这里是它的主页：

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00053.jpeg)

通过这个主页，你可以找到最新的版本并下载它。为了方便，下面给出下载页面的链接：

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00054.jpeg)

本书的配书文件包中提供了关于如何下载、安装和配置VirtualBox 软件的文档，有WORD 和PDF 两种版本，请选择使用。注意，要选择最新的版本下载，而且，由于该软件针对不同的操作系统平台开发，因此，要下载适用于Windows 的安装程序。

VirtualBox 软件安装完毕之后 ，你需要创建，或者说“虚拟”出一台计算机来，并设置该“计算机”的相关参数，包括为它配备一块硬盘。有关的方法和步骤在配书文件包的教程中已有介绍，唯一的建议是选用本书为你准备的虚拟硬盘。

和真实的计算机一样，虚拟机也需要一个或几个辅助存储器（磁盘、光盘、U 盘等）才能工作。不过，为它配备的并非真正的盘片，而是一个特殊的文件，故称为虚拟盘。这样，当一个软件程序在虚拟机里读写硬盘或者光盘时，虚拟机将把它转换成对文件的操作，而软件程序还以为自己真的是在读写物理盘片。这样的一块磁盘，在需要的时候随时创建，不需要时可以随时删除，这真是非常神奇的磁盘。

前面你已经从网上下载了与本书配套的源码和工具，那是个压缩文件。解压之后，在源代码和工具文件夹里有一个现成的虚拟硬盘文件，文件名是LEECHUNG.VHD，这是给你额外准备的，而且经过了测试，可以在你无法创建虚拟硬盘的时候派上用场。不管是你自己创建虚拟硬盘，还是选用这个现成的，都应当使虚拟硬盘文件位于源代码所在的文件夹，将来往该虚拟硬盘写数据时比较方便。

正如前面所说的，市面上有好几种流行的虚拟机软件，而每种虚拟机软件都企图制定自己的虚拟硬盘标准。因为虚拟硬盘实际是一个文件，所以，所谓虚拟硬盘标准，实际上就是该文件的格式。正是因为这样，虚拟硬盘类型说白了就是你准备采用哪家的虚拟硬盘文件格式。

因为虚拟硬盘实际上是一个文件，所以，通常来说，它的格式体现在它的文件扩展名上。比如上面的LEECHUNG.VHD，采用的就是微软公司的VHD 虚拟硬盘规范。VHD 规范最早起源于Connectix 公司的虚拟机软件Connectix Virtual PC，2003 年，微软公司收购了它并改名为Microsoft Virtual PC。2006 年，微软公司正式发布了VHD 虚拟硬盘格式规范。在本书配套的源代码和工具包里，有该规范的文档。

VDI 是VirtualBox 自己的虚拟硬盘规范，VMDK 是VMWare 的虚拟硬盘规范。采用哪个公司、哪个虚拟机软件的虚拟硬盘格式，对于普通的应用来说，这没什么关系，它们都能很好地工作。但是，对于本书和本书配套的工具来说，你必须选择“VHD（Virtual Hard Disk）”。具体原因，我们将在下一节讲述。

事实上，即使是VHD，也分为两种类型：固定尺寸的和动态分配的。一个固定尺寸的VHD，它对应的文件尺寸和该虚拟硬盘的容量是相同的，或者说是一次性分配够了的。比如，一个2GB 的VHD 虚拟硬盘，它对应的文件大小也是2GB。注意，本书以及本书配套的工具仅支持固定尺寸的VHD。

一旦完成了全部的准备工作，刚刚创建的虚拟机就会显示在VirtualBox 控制台里，如图4-6所示，虚拟机的名字叫“LEARN-ASM”。基本上，你现在就可以单击控制台界面上的“开始”来启动这台虚拟机。但是，别忙，你的虚拟硬盘里还没有东西呢。

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00055.jpeg)

图4-6　通过向导程序创建的LEARN-ASM 虚拟机