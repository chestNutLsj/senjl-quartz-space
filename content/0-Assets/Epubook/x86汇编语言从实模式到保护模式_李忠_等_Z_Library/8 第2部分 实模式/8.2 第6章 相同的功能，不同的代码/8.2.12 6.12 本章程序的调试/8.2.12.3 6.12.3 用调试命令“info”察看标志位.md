### 6.12.3　用调试命令“info”察看标志位

为了察看标志寄存器FLAGS 的状态（各个标志位），可以在Bochs 中使用命令“info”。使用该命令可以显示多种类型的处理器信息，显示标志寄存器的状态只是其功能之一。

为了显示标志寄存器的状态，可以使用“eflags”参数，即“info eflags”。INTEL8086 的标志寄存器是16 位的，称做FLAGS；在32 位处理器上，该标志寄存器做了扩展，达到了32 位，称做EFLAGS。因此，在Bochs 中，应当输入“info eflags”而不是“info flags”。

要察看标志寄存器的状态，应当在调试本章程序的过程中进行。如图6-11 所示，我们在执行第33 行的xor dx,dx 指令之前，察看一下标志寄存器的状态。

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00194.jpeg)

图6-11　在Bochs 中察看标志寄存器的状态

如图中所示，当命令输入之后，Bochs 显示一行古怪的文字作为回应，请允许我来解释一下这些东西都是什么。

首先，像“id、vip、vif、ac、vm、rf、nt、IOPL”这些标志，是32 位处理器才有的，现在不用管它们。

然后，“of”是溢出标志；“df”是方向标志；“if”和“tf”是和中断有关标志，第9 章才能讲到；“sf”是符号标志；“zf”是零标志；“af”是辅助进位标志；“pf”是奇偶标志；“cf”是进位标志。

问题是，光显示标志的名称，怎么知道某个标志位是“0”还是“1”呢？很简单，如果显示的标志名称是小写的，那么，说明该标志为“0”；否则，该标志的状态为“1”。如图中所示，因为符号标志是大写的“SF”，因此，表明该标志当前的状态是“1”。

注意，我们现在关注的是当xor 指令执行后，标志寄存器的变化情况。接下来，我们单步执行xor dx,dx 指令，然后再显示一次标志寄存器的内容。

如图6-12 所示，该指令执行后，符号标志的名称变成小写，零标志和奇偶标志的名称变为大写。请你想一想，这是为什么？

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00195.jpeg)

图6-12　xor dx,dx 指令对标志寄存器的影响

检测点6.5

调试本章程序。要求：使用反汇编命令定位到源程序第53 行（jmp near $），然后在这里设置断点，并用“c”命令连续执行到该断点位置。注意，因为Bochs 会把非指令的数据也视为指令，这将有可能导致反汇编不正确。因此，要小心避开这些数据区，在Bochs 把物理地址0x7C00 之后的数据（一大堆零）也反汇编成指令时，不要感到惊讶。