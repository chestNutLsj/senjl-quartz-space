### 7.6.2　在调试过程中察看栈中内容

很多程序错误与栈的不当使用有关。因此，在调试程序的过程中，不可避免地要察看栈的状态，从中发现一些导致程序出错的蛛丝马迹。

在Bochs 中察看栈的命令是“print-stack”，它可以带一个参数，用于指定显示多少数据。如果不使用参数，则默认显示当前栈中的16 个字。

如图7-5 所示，当单步执行了“push dx”指令后，我们立即用“print-stack”命令来察看当前栈。当前栈是由段寄存器SS 指示的，栈顶是由栈指针寄存器SP 指示的。

![img](../0-Assets/Epubook/x86汇编语言从实模式到保护模式_李忠_等_Z_Library/images/00220.jpeg)

图7-5　在Bochs 中察看当前栈中的数据

Bochs 并不知道栈的实际大小，因此，它只是显示栈顶（由SP 指示）以下的16 个字。如图中所示，栈顶数据是0x0030，其物理内存地址是0xFFFE，这是刚压入的寄存器DX 的内容。

因为栈是从高地址向低地址推进的，因此，所谓的“栈顶以下”，实际上指的是高地址方向。因此，下一个栈单元的物理内存地址是0xFFFE 加2，即0x10000。实际上，那里并不属于当前栈段，当前栈段的物理地址范围是0x00000~0x0FFFF，而且实际上我们只使用0x07E00~0x0FFFF 之间的区域，但Bochs 并不知道这些。