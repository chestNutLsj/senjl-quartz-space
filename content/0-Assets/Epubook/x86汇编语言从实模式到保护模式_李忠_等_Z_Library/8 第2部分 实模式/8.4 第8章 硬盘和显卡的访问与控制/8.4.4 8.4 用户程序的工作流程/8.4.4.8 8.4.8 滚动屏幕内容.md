### 8.4.8　滚动屏幕内容

第91、92 行，比较寄存器BX 中的内容是否小于2000。如果是的话，很好，很正常，直接转移到标号.set_cursor 处设置光标；否则继续往下执行以滚动屏幕内容。

滚动屏幕内容，实质上就是将屏幕上第2～25 行的内容整体往上提一行，最后用黑底白字的空白字符填充第25 行，使这一行什么也不显示。

为了加快速度，提高效率，程序里采用的是将数据从一个内存区域（块）搬运到另一个内存区域（块）的做法，核心指令是movsw。

第94～101 行，设定源区域从显存内偏移地址为0xa0（屏幕第2 行第1 列的位置）的地方开始，该区域的段地址在段寄存器DS 中，偏移地址在变址寄存器SI 中；目标区域从显存内偏移地址为0x00（屏幕第1 行第1 列的位置）的地方开始，该区域的段地址在段寄存器ES 中，偏移地址在变址寄存器DI 中。同时，设置方向标志，并在寄存器CX 中设置要传送的字数1920（24 行乘以80 个字符/行，再乘以每个字符占用的字节数2，再除以2 字节/字）。最后，执行rep movsw以完成传送工作。

屏幕最下面一行（第25 行）还有原来的内容，必须予以清除。第25 行第1 列在显存中的偏移地址是3840。为此，第102～107 行，使用黑底白字的空白字符循环写入这一行。

最后，第109 行，滚屏之后，光标应当位于最后一行的第1 列，其数值为1920，这一行的指令将这个新的数值传送到寄存器BX 中。