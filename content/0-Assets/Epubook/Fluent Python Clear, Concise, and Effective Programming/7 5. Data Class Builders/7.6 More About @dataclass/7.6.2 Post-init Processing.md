## Post-init Processing

The `__init__` method generated by `@dataclass` only takes the arguments passed and assigns them—or their default values, if missing—to the instance attributes that are instance fields. But you may need to do more than that to initialize the instance. If that’s the case, you can provide a `__post_init__` method. When that method exists, `@dataclass` will add code to the generated `__init__` to call `__post_init__` as the last step.

Common use cases for `__post_init__` are validation and computing field values based on other fields. We’ll study a simple example that uses `__post_init__` for both of these reasons.

First, let’s look at the expected behavior of a `ClubMember` subclass named `HackerClubMember`, as described by doctests in [Example 5-16](#hackerclub_doctests_ex).

##### Example 5-16. _dataclass/hackerclub.py_: doctests for `HackerClubMember`

```
"""
```

Note that we must provide `handle` as a keyword argument, because `HackerClubMember` inherits `name` and `guests` from `ClubMember`, and adds the `handle` field. The generated docstring for `HackerClubMember` shows the order of the fields in the constructor call:

```
>>> 
```

Here, `<factory>` is a short way of saying that some callable will produce the default value for `guests` (in our case, the factory is the `list` class). The point is: to provide a `handle` but no `guests`, we must pass `handle` as a keyword argument.

The [“Inheritance” section of the `dataclasses` module documentation](https://fpy.li/5-10) explains how the order of the fields is computed when there are several levels of inheritance.

###### Note

In [Chapter 14](ch14.html#inheritance) we’ll talk about misusing inheritance, particularly when the superclasses are not abstract. Creating a hierarchy of data classes is usually a bad idea, but it served us well here to make [Example 5-17](#hackerclub_ex) shorter, focusing on the `handle` field declaration and `__post_init__` validation.

[Example 5-17](#hackerclub_ex) shows the implementation.

##### Example 5-17. _dataclass/hackerclub.py_: code for `HackerClubMember`

```
from
```

[![^1]

`HackerClubMember` extends `ClubMember`.

[![^2]

`all_handles` is a class attribute.

[![^3]

`handle` is an instance field of type `str` with an empty string as its default value; this makes it optional.

[![^4]

Get the class of the instance.

[![^5]

If `self.handle` is the empty string, set it to the first part of `name`.

[![^6]

If `self.handle` is in `cls.all_handles`, raise `ValueError`.

[![^7]

Add the new `handle` to `cls.all_handles`.

[Example 5-17](#hackerclub_ex) works as intended, but is not satisfactory to a static type checker. Next, we’ll see why, and how to fix it.